{"remainingRequest":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\railway-admin\\src\\components\\Warehouse-management.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\railway-admin\\src\\components\\Warehouse-management.vue","mtime":1614060710849},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3dhcmVob3VzZUNoZWNrIHsKCiAgLmVsLWlucHV0X19pbm5lciwKICAuZWwtYnV0dG9uIHsKICAgIGhlaWdodDogMzRweCAhaW1wb3J0YW50OwogICAgZm9udC1zaXplOiAxM3B4OwogIH0KCiAgLmVsLWJ1dHRvbiB7CiAgICBsaW5lLWhlaWdodDogOXB4OwogIH0KfQo="},{"version":3,"sources":["Warehouse-management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkWA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Warehouse-management.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"warehouse-management-container\">\r\n    <!-- <h1>出库管理</h1> -->\r\n    <div style=\"display: flex;justify-content: space-between;\">\r\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"设备筛选\" placement=\"right-start\">\r\n        <img src=\"../assets/imgs/filter.png\" @click=\"filterList\" style=\"width: 28px;height: 34px;cursor:pointer;\" />\r\n      </el-tooltip>\r\n      <el-dialog title=\"设备筛选\" :visible.sync=\"dialogDeviceCheckVisible\" :close-on-press-escape=\"false\"\r\n        :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"false\">\r\n        <el-form label-width=\"82px\">\r\n          <el-form-item label=\"所属部门：\">\r\n            <el-cascader class=\"input-style\" ref=\"menuCascaderFilter\" v-model=\"deptId\" :options=\"menuList\"\r\n              :props=\"propsMenu\" :show-all-levels=\"false\" clearable @change=\"menuChange\">\r\n            </el-cascader>\r\n          </el-form-item>\r\n          <el-form-item label=\"所属厂家：\">\r\n            <el-select v-model=\"supplierId\" class=\"input-style\" @change=\"supplierChange\" clearable>\r\n              <el-option v-for=\"suppler in supplierList\" :key=\"suppler.id\" :label=\"suppler.name\" :value=\"suppler.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"所属系统：\">\r\n            <el-select v-model=\"systemId\" class=\"input-style\" clearable>\r\n              <el-option v-for=\"system in systemSelList\" :key=\"system.id\" :label=\"system.name\" :value=\"system.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"生产批次：\">\r\n            <el-input v-model=\"benchmark\" class=\"input-style\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"设备名称：\">\r\n            <el-input v-model=\"deviceName\" class=\"input-style\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"设备型号：\">\r\n            <el-input v-model=\"deviceModel\" class=\"input-style\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\">\r\n          <el-button @click=\"dialogDeviceCheckVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"filterListSure\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <div style=\"display: flex;\" id=\"warehouseCheck\">\r\n        <el-input style=\"width: 340px;\" v-model=\"warehouseKeyword\" placeholder=\"可输入厂家、系统、设备名称，设备型号，生产批次进行搜索\" clearable>\r\n        </el-input>\r\n        <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"warehouseCheck\">查 询</el-button>\r\n      </div>\r\n    </div>\r\n    <div style=\"margin-top: 20px;\">\r\n      <el-table ref=\"multipleTable\" :data=\"deviceAllList\" tooltip-effect=\"dark\" style=\"width: 800px\" border\r\n        @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column label=\"所属厂家\">\r\n          <template slot-scope=\"scope\">{{ scope.row.supplierName }}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"所属系统\">\r\n          <template slot-scope=\"scope\">{{ scope.row.systemName }}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"设备名称\">\r\n          <template slot-scope=\"scope\">{{ scope.row.deviceName }}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"deviceModel\" label=\"设备型号\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"benchmark\" label=\"生产批次\" show-overflow-tooltip>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"deliverButton\">\r\n        <el-button class=\"deliverCon\" type=\"primary\" @click=\"delivery\">出 库</el-button>\r\n        <el-dialog title=\"设备出库\" :visible.sync=\"dialogDeliveryVisible\" :close-on-press-escape=\"false\"\r\n          :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"false\">\r\n          <el-form :model=\"deliveryData\" :rules=\"deliveryRules\" ref=\"deliveryForm\" label-width=\"92px\">\r\n            <el-form-item label=\"出库类型：\" prop=\"type\">\r\n              <el-select v-model=\"deliveryData.type\" class=\"input-style\">\r\n                <el-option v-for=\"item in deliveryType\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"出库时间：\" prop=\"stockOutTime\">\r\n              <el-date-picker class=\"input-style\" v-model=\"deliveryData.stockOutTime\" type=\"date\" placeholder=\"请选择\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"领货人：\" prop=\"receiver\">\r\n              <el-input class=\"input-style\" v-model=\"deliveryData.receiver\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"备注：\" prop=\"note\">\r\n              <el-input class=\"input-style\" v-model=\"deliveryData.note\"></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\">\r\n            <el-button @click=\"dialogDeliveryVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"deliverySure\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        dialogDeviceCheckVisible: false,\r\n        deptId: '',\r\n        supplierId: '',\r\n        systemId: '',\r\n        benchmark: '',\r\n        deviceName: '',\r\n        deviceModel: '',\r\n        stockInList: [],\r\n        menuList: [],\r\n        propsMenu: {\r\n          checkStrictly: true,\r\n          emitPath: false,\r\n          value: 'id',\r\n          label: 'label'\r\n        },\r\n        supplierList: [],\r\n        systemList: [],\r\n        systemSelList: [],\r\n        multipleSelection: [],\r\n        deviceAllList: [],\r\n        dialogDeliveryVisible: false,\r\n        deliveryType: [{\r\n          id: 1,\r\n          name: '使用出库'\r\n        }, {\r\n          id: 2,\r\n          name: '维修出库'\r\n        }, {\r\n          id: 3,\r\n          name: '检测出库'\r\n        }, {\r\n          id: 4,\r\n          name: '报废出库'\r\n        }, ],\r\n        deliveryData: {\r\n          type: 1,\r\n          stockOutTime: '',\r\n          receiver: '',\r\n          note: '',\r\n          stockInIdList: []\r\n\r\n        },\r\n        deliveryRules: {\r\n          type: [{\r\n            required: true,\r\n            message: '请选择出库类型',\r\n            trigger: 'change'\r\n          }],\r\n          stockOutTime: [{\r\n            required: true,\r\n            message: '请选择出库时间',\r\n            trigger: 'blur'\r\n          }],\r\n          receiver: [{\r\n            required: true,\r\n            message: '请输入领货人',\r\n            trigger: 'blur'\r\n          }],\r\n        },\r\n        warehouseKeyword: '',\r\n\r\n      }\r\n    },\r\n    created() {\r\n      this.filterListSure();\r\n      this.getWarehouseList();\r\n      this.getSupplierAllList();\r\n    },\r\n    methods: {\r\n      // 选择出库设备\r\n      handleSelectionChange(val) {\r\n        this.multipleSelection = val;\r\n        console.log(this.multipleSelection);\r\n      },\r\n      // 出库\r\n      delivery() {\r\n        this.deliveryData.stockInIdList = [];\r\n        this.deliveryData.type = 1;\r\n        this.deliveryData.stockOutTime = '';\r\n        this.deliveryData.receiver = '';\r\n        this.deliveryData.note = '';\r\n        if (this.multipleSelection.length == 0) {\r\n          this.$message.error({\r\n            message: '请选择出库设备',\r\n            showClose: true,\r\n            duration: 1000\r\n          })\r\n        } else {\r\n          for (const device of this.multipleSelection) {\r\n            this.deliveryData.stockInIdList.push(device.id);\r\n          };\r\n          console.log(this.deliveryData.stockInIdList);\r\n          this.dialogDeliveryVisible = true;\r\n        };\r\n      },\r\n      // 确定出库\r\n      deliverySure() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/stockOutDo', {\r\n          type: this.deliveryData.type,\r\n          stockOutTime: this.shellDate(this.deliveryData.stockOutTime),\r\n          note: this.deliveryData.note,\r\n          receiver: this.deliveryData.receiver,\r\n          stockInIdList: this.deliveryData.stockInIdList\r\n        }).then(res => {\r\n          console.log('设备出库');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '出库成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.filterListSure();\r\n          this.dialogDeliveryVisible = false;\r\n        }).catch(err => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogDeliveryVisible = false;\r\n        })\r\n      },\r\n      // 筛选设备\r\n      filterList() {\r\n        this.dialogDeviceCheckVisible = true;\r\n        this.deptId = '';\r\n        this.supplierId = '';\r\n        this.systemId = '';\r\n        this.benchmark = '';\r\n        this.deviceName = '';\r\n        this.deviceModel = '';\r\n        this.warehouseKeyword = '';\r\n      },\r\n      // 部门选择\r\n      menuChange() {\r\n        console.log(this.deptId);\r\n      },\r\n      // 厂家选择\r\n      supplierChange() {\r\n        this.systemSelList = [];\r\n        for (const item of this.systemList) {\r\n          if (item.parentId == this.supplierId) {\r\n            this.systemSelList.push(item);\r\n          }\r\n        }\r\n      },\r\n      // 确定筛选\r\n      filterListSure() {\r\n        this.deviceAllList = [];\r\n        this.$axios.post(this.$store.state.baseUrl + '/stockInList', {\r\n          deptId: this.deptId,\r\n          supplierId: this.supplierId,\r\n          systemId: this.systemId,\r\n          benchmark: this.benchmark,\r\n          deviceName: this.deviceName,\r\n          deviceModel: this.deviceModel\r\n        }).then((res) => {\r\n          console.log('条件查找库存列表');\r\n          console.log(res);\r\n          this.stockInList = res.data;\r\n          for (const con of this.stockInList) {\r\n            this.deviceAllList.push(...con.deviceList);\r\n          };\r\n          console.log(this.deviceAllList);\r\n          this.dialogDeviceCheckVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n          this.dialogDeviceCheckVisible = false;\r\n        });\r\n      },\r\n      warehouseCheck() {\r\n        this.deviceAllList = [];\r\n        this.$axios.post(this.$store.state.baseUrl + '/stockInList', {\r\n          deptId: this.deptId,\r\n          supplierId: this.supplierId,\r\n          systemId: this.systemId,\r\n          benchmark: this.benchmark,\r\n          deviceName: this.deviceName,\r\n          deviceModel: this.deviceModel\r\n        }).then((res) => {\r\n          console.log('条件查找库存列表');\r\n          console.log(res);\r\n          this.stockInList = res.data;\r\n          for (const con of this.stockInList) {\r\n            this.deviceAllList.push(...con.deviceList);\r\n          };\r\n          console.log(this.deviceAllList);\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        });\r\n      },\r\n      // 获取部门列表\r\n      getWarehouseList() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/menuWarehouseList').then((res) => {\r\n          console.log('部门列表');\r\n          console.log(res);\r\n          this.menuList = res.data.menuList;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      // 获取所有厂家列表\r\n      getSupplierAllList() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierList').then((res) => {\r\n          console.log('厂家列表');\r\n          console.log(res);\r\n          this.supplierList = res.data.supplierList;\r\n          this.systemList = res.data.systemList;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        });\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .warehouse-management-container {\r\n    padding: 20px;\r\n    background-color: #fff;\r\n    border-radius: 6px;\r\n    text-align: left;\r\n\r\n    .input-style {\r\n      width: 100%;\r\n    }\r\n\r\n    .deliverButton {\r\n      position: relative;\r\n\r\n      .deliverCon {\r\n        width: 200px;\r\n        position: fixed;\r\n        bottom: 50px;\r\n        right: 30%;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  #warehouseCheck {\r\n\r\n    .el-input__inner,\r\n    .el-button {\r\n      height: 34px !important;\r\n      font-size: 13px;\r\n    }\r\n\r\n    .el-button {\r\n      line-height: 9px;\r\n    }\r\n  }\r\n</style>"]}]}