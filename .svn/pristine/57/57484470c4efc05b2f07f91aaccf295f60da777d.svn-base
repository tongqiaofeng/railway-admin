{"remainingRequest":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\railway-admin\\src\\components\\Supplier-admin.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\railway-admin\\src\\components\\Supplier-admin.vue","mtime":1615365378737},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3N1cHBsaWVyLWFkbWluLXBhZ2UgewogIC5lbC10YWJsZSAuY2VsbCB7CiAgICBkaXNwbGF5OiBmbGV4OwogIH0KfQoKI2FkZEJ1dHRvbiB7CiAgLmVsLWJ1dHRvbi0tbWVkaXVtIHsKICAgIGhlaWdodDogNDBweDsKICAgIHBhZGRpbmc6IDEwcHggMDsKICB9Cn0K"},{"version":3,"sources":["Supplier-admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8uBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Supplier-admin.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"supplier-admin-page-container\" id=\"supplier-admin-page\">\r\n    <!-- <p>供应商管理</p> -->\r\n    <div class=\"manufacturers-select\">\r\n      <p class=\"top-font\">厂家列表</p>\r\n      <div>\r\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"supplierForm\" label-width=\"70px\" class=\"demo-ruleForm\">\r\n          <el-form-item label=\"名称：\" prop=\"name\">\r\n            <el-input v-model=\"ruleForm.name\" clearable></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"地址：\" prop=\"addr\">\r\n            <div style=\"display: flex;\">\r\n              <el-input v-model=\"ruleForm.addr\" clearable></el-input>\r\n              <el-button style=\"width: 110px;margin-left: 10px;\" type=\"primary\" size=\"medium\"\r\n                @click=\"supplierAdd('supplierForm')\" v-preventClick>+ 新 建\r\n              </el-button>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div>\r\n        <el-table :data=\"supplierList\" style=\"width: 100%\" border row-key=\"id\" highlight-current-row\r\n          @current-change=\"supplierChange\" ref=\"supplierTable\">\r\n          <el-table-column prop=\"name\" label=\"厂家名称\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"address\" label=\"联系地址\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"120px\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"cell-work\">\r\n                <el-button type=\"text\" @click=\"supplierUpdate(scope.row)\">\r\n                  修改\r\n                </el-button>\r\n                <el-dialog title=\"修改厂家信息\" :visible.sync=\"dialogSupplierUpdateVisible\" :close-on-press-escape=\"false\"\r\n                  :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"true\">\r\n                  <el-form label-width=\"55px\">\r\n                    <el-form-item label=\"名称：\">\r\n                      <el-input v-model=\"supplierUpdateDetails.name\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"地址：\">\r\n                      <el-input v-model=\"supplierUpdateDetails.address\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                  </el-form>\r\n                  <div slot=\"footer\">\r\n                    <el-button @click=\"dialogSupplierUpdateVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"supplierUpdateSure\" v-preventClick>确 定</el-button>\r\n                  </div>\r\n                </el-dialog>\r\n                <el-button type=\"text\" style=\"color: red;\" @click=\"supplierDelete(scope.row)\">删除\r\n                </el-button>\r\n                <el-dialog title=\"删除厂家\" :visible.sync=\"dialogSupplierDeleteVisible\" :close-on-press-escape=\"false\"\r\n                  :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"true\">\r\n                  <div style=\"text-align: center;\">\r\n                    <p style=\"margin-top: 10px;margin-bottom: 0;font-size: 16px;color: #4e4e4e;\">确定删除该厂家？删除后不可修改</p>\r\n                  </div>\r\n                  <div slot=\"footer\">\r\n                    <el-button @click=\"dialogSupplierDeleteVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"supplierDeleteSure\" v-preventClick>确 定</el-button>\r\n                  </div>\r\n                </el-dialog>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n    <div class=\"system-select\">\r\n      <p class=\"top-font\">系统列表</p>\r\n      <div>\r\n        <el-form :model=\"systemForm\" :rules=\"systemRules\" ref=\"systemForm\" class=\"demo-ruleForm\">\r\n          <el-row :gutter=\"10\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"系统名称：\" prop=\"name\" label-width=\"95px\">\r\n                <el-input v-model=\"systemForm.name\" clearable></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"联系人：\" prop=\"contactName\" label-width=\"80px\">\r\n                <el-input v-model=\"systemForm.contactName\" clearable></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"联系电话：\" prop=\"phoneNumber\" label-width=\"95px\">\r\n            <div style=\"display: flex;\">\r\n              <el-input v-model=\"systemForm.phoneNumber\" clearable></el-input>\r\n              <el-button type=\"primary\" style=\"width: 110px;margin-left: 10px;\" size=\"medium\"\r\n                @click=\"systemAdd('systemForm')\" v-preventClick>+ 新 建\r\n              </el-button>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div>\r\n        <el-table :data=\"systemSelectList\" style=\"width: 100%\" border highlight-current-row row-key=\"id\"\r\n          @current-change=\"systemChange\" ref=\"systemTable\">\r\n          <el-table-column prop=\"name\" label=\"系统名称\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"contactName\" label=\"联系人\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"phoneNumber\" label=\"联系电话\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"120px\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"cell-work\">\r\n                <el-button type=\"text\" @click=\"systemUpdate(scope.row)\">\r\n                  修改\r\n                </el-button>\r\n                <el-dialog title=\"修改系统信息\" :visible.sync=\"dialogSystemUpdateVisible\" :close-on-press-escape=\"false\"\r\n                  :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"true\">\r\n                  <el-form label-width=\"82px\">\r\n                    <el-form-item label=\"系统名称：\">\r\n                      <el-input v-model=\"systemUpdateDetail.name\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"联系人：\">\r\n                      <el-input v-model=\"systemUpdateDetail.contactName\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"联系人：\">\r\n                      <el-input v-model=\"systemUpdateDetail.phoneNumber\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                  </el-form>\r\n                  <div slot=\"footer\">\r\n                    <el-button @click=\"dialogSystemUpdateVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"systemUpdateSure\" v-preventClick>确 定</el-button>\r\n                  </div>\r\n                </el-dialog>\r\n                <el-button type=\"text\" style=\"color: red;\" @click=\"systemDelete(scope.row)\">删除\r\n                </el-button>\r\n                <el-dialog title=\"删除系统\" :visible.sync=\"dialogSystemDeleteVisible\" :close-on-press-escape=\"false\"\r\n                  :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"true\">\r\n                  <div style=\"text-align: center;\">\r\n                    <p style=\"margin-top: 10px;margin-bottom: 0;font-size: 16px;color: #4e4e4e;\">确定删除该系统？删除后不可修改</p>\r\n                  </div>\r\n                  <div slot=\"footer\">\r\n                    <el-button @click=\"dialogSystemDeleteVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"systemDeleteSure\" v-preventClick>确 定</el-button>\r\n                  </div>\r\n                </el-dialog>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n    <div class=\"equipment-select\">\r\n      <p class=\"top-font\">设备列表</p>\r\n      <div>\r\n        <el-form :model=\"deviceForm\" :rules=\"deviceRules\" ref=\"deviceForm\" class=\"demo-ruleForm\">\r\n          <el-row :gutter=\"10\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"设备名称：\" prop=\"name\" label-width=\"95px\">\r\n                <el-input v-model=\"deviceForm.name\" clearable></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"型号：\" prop=\"model\" label-width=\"65px\">\r\n                <el-input v-model=\"deviceForm.model\" clearable></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"报警数量：\" label-width=\"95px\">\r\n            <div style=\"display: flex;\">\r\n              <el-input v-model=\"deviceForm.warnNumber\" clearable></el-input>\r\n              <el-button style=\"width: 110px;margin-left: 10px;\" type=\"primary\" size=\"medium\"\r\n                @click=\"deviceAdd('deviceForm')\" v-preventClick>+ 新 建\r\n              </el-button>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div>\r\n        <el-table :data=\"deviceSelectList\" style=\"width: 100%\" border highlight-current-row row-key=\"id\"\r\n          @current-change=\"deviceChange\" ref=\"deviceTable\">\r\n          <el-table-column prop=\"name\" label=\"设备名称\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"model\" label=\"型号\" width=\"width\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"120px\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"cell-work\">\r\n                <el-button type=\"text\" @click=\"deviceUpdate(scope.row)\">\r\n                  修改\r\n                </el-button>\r\n                <el-dialog title=\"修改设备信息\" :visible.sync=\"dialogDeviceUpdateVisible\" :close-on-press-escape=\"false\"\r\n                  :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"true\">\r\n                  <el-form label-width=\"82px\">\r\n                    <el-form-item label=\"设备名称：\">\r\n                      <el-input v-model=\"deviceUpdateDetail.name\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"型号：\">\r\n                      <el-input v-model=\"deviceUpdateDetail.model\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"报警数量：\">\r\n                      <el-input v-model=\"deviceUpdateDetail.warnNumber\" style=\"width: 100%;\"></el-input>\r\n                    </el-form-item>\r\n                  </el-form>\r\n                  <div slot=\"footer\">\r\n                    <el-button @click=\"dialogDeviceUpdateVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"deviceUpdateSure\" v-preventClick>确 定</el-button>\r\n                  </div>\r\n                </el-dialog>\r\n                <el-button type=\"text\" style=\"color: red;\" @click=\"deviceDelete(scope.row)\">删除\r\n                </el-button>\r\n                <el-dialog title=\"删除系统\" :visible.sync=\"dialogDeviceDeleteVisible\" :close-on-press-escape=\"false\"\r\n                  :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"true\">\r\n                  <div style=\"text-align: center;\">\r\n                    <p style=\"margin-top: 10px;margin-bottom: 0;font-size: 16px;color: #4e4e4e;\">确定删除该设备？删除后不可修改</p>\r\n                  </div>\r\n                  <div slot=\"footer\">\r\n                    <el-button @click=\"dialogDeviceDeleteVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"deviceDeleteSure\" v-preventClick>确 定</el-button>\r\n                  </div>\r\n                </el-dialog>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        supplierList: [],\r\n        supplierDetail: {},\r\n        systemList: [],\r\n        deviceList: [],\r\n        systemSelectList: [],\r\n        deviceSelectList: [],\r\n        ruleForm: {\r\n          name: '',\r\n          addr: '',\r\n        },\r\n        rules: {\r\n          name: [{\r\n            required: true,\r\n            message: '请输入厂家名称',\r\n            trigger: 'blur'\r\n          }],\r\n          addr: [{\r\n            required: true,\r\n            message: '请输入厂家地址',\r\n            trigger: 'blur'\r\n          }],\r\n        },\r\n        systemForm: {\r\n          name: '',\r\n          contactName: '',\r\n          phoneNumber: ''\r\n        },\r\n        systemRules: {\r\n          name: [{\r\n            required: true,\r\n            message: '请输入系统名称',\r\n            trigger: 'blur'\r\n          }],\r\n          contactName: [{\r\n            required: true,\r\n            message: '请输入联系人',\r\n            trigger: 'blur'\r\n          }],\r\n          phoneNumber: [{\r\n            message: '请输入联系电话',\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        systemDetail: {},\r\n        deviceDetail: {},\r\n        deviceForm: {\r\n          name: '',\r\n          model: '',\r\n          warnNumber: ''\r\n        },\r\n        deviceRules: {\r\n          name: [{\r\n            required: true,\r\n            message: '请输入设备名称',\r\n            trigger: 'blur'\r\n          }],\r\n          model: [{\r\n            required: true,\r\n            message: '请输入型号',\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        dialogSupplierUpdateVisible: false,\r\n        supplierUpdateDetails: {},\r\n        dialogSupplierDeleteVisible: false,\r\n        dialogSystemUpdateVisible: false,\r\n        systemUpdateDetail: {},\r\n        dialogSystemDeleteVisible: false,\r\n        dialogDeviceUpdateVisible: false,\r\n        deviceUpdateDetail: {},\r\n        dialogDeviceDeleteVisible: false,\r\n\r\n      }\r\n    },\r\n    created() {\r\n      this.getSupplierList();\r\n    },\r\n    methods: {\r\n      // 设备选择\r\n      deviceChange(val) {\r\n        console.log(val);\r\n        if (val !== null) {\r\n          this.deviceDetail = val;\r\n        }\r\n      },\r\n      // 设备增加\r\n      deviceAdd(formName) {\r\n        console.log(formName);\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$axios.post(this.$store.state.baseUrl + '/supplierSave', {\r\n              type: 2,\r\n              device: {\r\n                parentId: this.systemDetail.id,\r\n                name: this.deviceForm.name,\r\n                model: this.deviceForm.model,\r\n                warnNumber: this.deviceForm.warnNumber\r\n              }\r\n            }).then((res) => {\r\n              console.log('新增设备');\r\n              console.log(res);\r\n              this.$message.success({\r\n                message: '新建成功',\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n              this.deviceForm.name = '';\r\n              this.deviceForm.model = '';\r\n              this.deviceForm.warnNumber = '';\r\n              this.getSupplierList();\r\n            }).catch((err) => {\r\n              console.log(err);\r\n              this.$message.error({\r\n                message: err.data.message,\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n            });\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      // 修改\r\n      deviceUpdate(value) {\r\n        this.deviceUpdateDetail = value;\r\n        this.dialogDeviceUpdateVisible = true;\r\n      },\r\n      // 确定修改\r\n      deviceUpdateSure() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierSave', {\r\n          type: 2,\r\n          device: {\r\n            id: this.deviceUpdateDetail.id,\r\n            parentId: this.systemDetail.id,\r\n            name: this.deviceUpdateDetail.name,\r\n            model: this.deviceUpdateDetail.model,\r\n            warnNumber: this.deviceUpdateDetail.warnNumber\r\n          }\r\n        }).then((res) => {\r\n          console.log('修改设备');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '修改成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.getSupplierList();\r\n          this.dialogDeviceUpdateVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogDeviceUpdateVisible = false;\r\n        });\r\n      },\r\n      // 删除\r\n      deviceDelete() {\r\n        this.dialogDeviceDeleteVisible = true;\r\n      },\r\n      // 确定删除\r\n      deviceDeleteSure() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierDelete', {\r\n          id: this.deviceDetail.id,\r\n        }).then((res) => {\r\n          console.log('删除设备');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '删除成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.deviceDetail = {};\r\n          this.getSupplierList();\r\n          this.dialogDeviceDeleteVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogDeviceDeleteVisible = false;\r\n        });\r\n      },\r\n      // 系统选择\r\n      systemChange(val) {\r\n        console.log(val);\r\n        if (val !== null) {\r\n          this.systemDetail = val;\r\n\r\n          this.deviceSelectList = [];\r\n          for (const sys of this.deviceList) {\r\n            if (sys.parentId == this.systemDetail.id) {\r\n              this.deviceSelectList.push(sys);\r\n            }\r\n          };\r\n          console.log(this.deviceSelectList);\r\n          this.deviceForm.name = '';\r\n          this.deviceForm.model = '';\r\n        }\r\n      },\r\n      // 系统增加\r\n      systemAdd(formName) {\r\n        console.log(formName);\r\n        console.log(this.$refs.supplierTable);\r\n        console.log(this.supplierDetail);\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$axios.post(this.$store.state.baseUrl + '/supplierSave', {\r\n              type: 1,\r\n              system: {\r\n                parentId: this.supplierDetail.id,\r\n                name: this.systemForm.name,\r\n                contactName: this.systemForm.contactName,\r\n                phoneNumber: this.systemForm.phoneNumber\r\n              }\r\n            }).then((res) => {\r\n              console.log('新增系统');\r\n              console.log(res);\r\n              this.$message.success({\r\n                message: '新建成功',\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n              this.systemForm.name = '';\r\n              this.systemForm.contactName = '';\r\n              this.systemForm.phoneNumber = '';\r\n              this.getSupplierList();\r\n            }).catch((err) => {\r\n              console.log(err);\r\n              this.$message.error({\r\n                message: err.data.message,\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n            });\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      // 修改\r\n      systemUpdate(value) {\r\n        this.systemUpdateDetail = value;\r\n        this.dialogSystemUpdateVisible = true;\r\n      },\r\n      // 确定修改\r\n      systemUpdateSure() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierSave', {\r\n          type: 1,\r\n          system: {\r\n            id: this.systemUpdateDetail.id,\r\n            parentId: this.supplierDetail.id,\r\n            name: this.systemUpdateDetail.name,\r\n            contactName: this.systemUpdateDetail.contactName,\r\n            phoneNumber: this.systemUpdateDetail.phoneNumber\r\n          }\r\n        }).then((res) => {\r\n          console.log('修改系统');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '修改成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.getSupplierList();\r\n          this.dialogSystemUpdateVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogSystemUpdateVisible = false;\r\n        });\r\n      },\r\n      // 删除\r\n      systemDelete() {\r\n        this.dialogSystemDeleteVisible = true;\r\n      },\r\n      // 确定删除\r\n      systemDeleteSure() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierDelete', {\r\n          id: this.systemDetail.id,\r\n        }).then((res) => {\r\n          console.log('删除系统');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '删除成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.systemDetail = {};\r\n          this.deviceSelectList = [];\r\n          this.getSupplierList();\r\n          this.dialogSystemDeleteVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogSystemDeleteVisible = false;\r\n        });\r\n      },\r\n      // 厂家选择\r\n      supplierChange(val) {\r\n        console.log(val);\r\n        if (val !== null) {\r\n          this.supplierDetail = val;\r\n          this.systemSelectList = [];\r\n          for (const sys of this.systemList) {\r\n            if (sys.parentId == this.supplierDetail.id) {\r\n              this.systemSelectList.push(sys);\r\n            }\r\n          };\r\n          console.log(this.systemSelectList);\r\n          this.systemForm.name = '';\r\n          this.systemForm.contactName = '';\r\n          this.systemForm.phoneNumber = '';\r\n          this.deviceForm.name = '';\r\n          this.deviceForm.model = '';\r\n          this.deviceSelectList = [];\r\n        }\r\n      },\r\n      // 删除厂家\r\n      supplierDelete() {\r\n        this.dialogSupplierDeleteVisible = true;\r\n      },\r\n      // 确定删除\r\n      supplierDeleteSure() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierDelete', {\r\n          id: this.supplierDetail.id,\r\n        }).then((res) => {\r\n          console.log('删除供应商');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '删除成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.supplierDetail = {};\r\n          this.systemSelectList = [];\r\n          this.deviceSelectList = [];\r\n          this.getSupplierList();\r\n          this.dialogSupplierDeleteVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.dialogSupplierDeleteVisible = false;\r\n        });\r\n      },\r\n      // 修改厂家\r\n      supplierUpdate(value) {\r\n        console.log(value);\r\n        this.supplierUpdateDetails = value;\r\n        this.dialogSupplierUpdateVisible = true;\r\n      },\r\n      // 确定修改\r\n      supplierUpdateSure() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierSave', {\r\n          type: 0,\r\n          supplier: {\r\n            id: this.supplierUpdateDetails.id,\r\n            name: this.supplierUpdateDetails.name,\r\n            address: this.supplierUpdateDetails.address\r\n          }\r\n        }).then((res) => {\r\n          console.log('修改供应商');\r\n          console.log(res);\r\n          this.$message.success({\r\n            message: '修改成功',\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n          this.getSupplierList();\r\n          this.dialogSupplierUpdateVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.dialogSupplierUpdateVisible = false;\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          });\r\n        });\r\n      },\r\n      // 新增厂家\r\n      supplierAdd(formName) {\r\n        console.log(formName);\r\n        console.log(this.$refs[formName]);\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            // alert('submit!');\r\n            this.$axios.post(this.$store.state.baseUrl + '/supplierSave', {\r\n              type: 0,\r\n              supplier: {\r\n                name: this.ruleForm.name,\r\n                address: this.ruleForm.addr\r\n              }\r\n            }).then((res) => {\r\n              console.log('新增供应商');\r\n              console.log(res);\r\n              this.$message.success({\r\n                message: '新建成功',\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n              this.ruleForm.name = '';\r\n              this.ruleForm.addr = '';\r\n              this.getSupplierList();\r\n            }).catch((err) => {\r\n              console.log(err);\r\n              this.$message.error({\r\n                message: err.data.message,\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n            });\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      // 获取供应商信息\r\n      getSupplierList() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierList').then((res) => {\r\n          console.log('供应商列表');\r\n          console.log(res);\r\n          this.supplierList = res.data.supplierList;\r\n          this.systemList = res.data.systemList;\r\n          this.deviceList = res.data.deviceList;\r\n          if (this.supplierDetail !== null && JSON.stringify(this.supplierDetail) !== \"{}\") {\r\n            console.log(this.supplierDetail);\r\n            for (const supp of this.supplierList) {\r\n              if (supp.id == this.supplierDetail.id) {\r\n                this.supplierDetail = supp;\r\n              }\r\n            };\r\n            this.$nextTick(() => {\r\n              this.supplierChange(this.supplierDetail);\r\n              console.log(this.$refs.supplierTable);\r\n              console.log(this.supplierDetail);\r\n              this.$refs.supplierTable.setCurrentRow(this.supplierDetail);\r\n            })\r\n          };\r\n          if (this.systemDetail !== null && JSON.stringify(this.systemDetail) !== \"{}\") {\r\n            console.log(this.systemDetail);\r\n            for (const supp of this.systemList) {\r\n              if (supp.id == this.systemDetail.id) {\r\n                this.systemDetail = supp;\r\n              }\r\n            };\r\n            this.$nextTick(() => {\r\n              this.systemChange(this.systemDetail);\r\n              console.log(this.$refs.systemTable);\r\n              console.log(this.systemDetail);\r\n              this.$refs.systemTable.setCurrentRow(this.systemDetail);\r\n            })\r\n          };\r\n          if (this.deviceDetail !== null && JSON.stringify(this.deviceDetail) !== \"{}\") {\r\n            console.log(this.deviceDetail);\r\n            for (const supp of this.deviceList) {\r\n              if (supp.id == this.deviceDetail.id) {\r\n                this.deviceDetail = supp;\r\n              }\r\n            };\r\n            this.$nextTick(() => {\r\n              this.deviceChange(this.deviceDetail);\r\n              console.log(this.$refs.deviceTable);\r\n              console.log(this.deviceDetail);\r\n              this.$refs.deviceTable.setCurrentRow(this.deviceDetail);\r\n            })\r\n          };\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        });\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .supplier-admin-page-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    .top-font {\r\n      margin-top: 0;\r\n      color: #6a6a6a;\r\n      font-size: 18px;\r\n      font-weight: bold;\r\n      text-align: left;\r\n    }\r\n\r\n    .manufacturers-select,\r\n    .system-select,\r\n    .equipment-select {\r\n      width: 31.5%;\r\n      padding: 20px 10px 20px;\r\n      background-color: #fff;\r\n      border-radius: 5px;\r\n    }\r\n\r\n    .cell-work {\r\n      width: 100%;\r\n      display: flex;\r\n      justify-content: space-around !important;\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  #supplier-admin-page {\r\n    .el-table .cell {\r\n      display: flex;\r\n    }\r\n  }\r\n\r\n  #addButton {\r\n    .el-button--medium {\r\n      height: 40px;\r\n      padding: 10px 0;\r\n    }\r\n  }\r\n</style>"]}]}