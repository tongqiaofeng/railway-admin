{"remainingRequest":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Test.vue?vue&type=style&index=0&id=5b2d5ecc&lang=scss&scoped=true&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Test.vue","mtime":1616121196789},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovLyAudGVzdC1jb250YWluZXIgewovLyAgIHdpZHRoOiA5MCU7Ci8vICAgbWFyZ2luOiAwIGF1dG87Ci8vICAgcGFkZGluZy10b3A6IDIwcHg7Ci8vIH0KCi8vICNzY2FsZSB7Ci8vICAgcG9zaXRpb246IHJlbGF0aXZlOwovLyB9CgovLyAuYWFhIHsKLy8gICB3aWR0aDogMTAwJTsKLy8gICBoZWlnaHQ6IDEwMCU7Ci8vICAgcG9zaXRpb246IGFic29sdXRlOwovLyAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC44NSk7Ci8vICAgb3ZlcmZsb3c6IGhpZGRlbjsKLy8gICB0b3A6IDA7Ci8vICAgYm90dG9tOiAwOwovLyAgIGxlZnQ6IDA7Ci8vICAgcmlnaHQ6IDA7Ci8vICAgei1pbmRleDogOTk5OwovLyB9CgovLyAuYWFhIGltZyB7Ci8vICAgdG9wOiA1MCU7Ci8vICAgbGVmdDogNTAlOwovLyAgIHdpZHRoOiAyMDBweDsKLy8gICB0cmFuc2l0aW9uOiAwcyBlYXNlIGFsbDsKLy8gICBwb3NpdGlvbjogYWJzb2x1dGU7Ci8vICAgLy8gdG9wOiAwOwovLyB9Cg=="},{"version":3,"sources":["Test.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Test.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"test-container\">\r\n    <div id=\"scale\">\r\n      <div style=\"width: 100%;display: flex;justify-content: space-around;\">\r\n        <el-carousel height=\"500px\" indicator-position=\"outside\" arrow=\"always\" :autoplay=\"false\" ref=\"carousel\">\r\n          <el-carousel-item v-for=\"(imgs, index) in imgList\" :key=\"index\">\r\n            <div style=\"width: 100%;height: 550px;margin: 0 auto;\">\r\n              <img style=\"width: 100%;height: 100%;object-fit:cover;\" v-show=\"imgs !== '' && imgs !== null\"\r\n                :src=\"img + '/file/' + imgs\" @click=\"clickImg(index,imgs)\" />\r\n            </div>\r\n          </el-carousel-item>\r\n        </el-carousel>\r\n      </div>\r\n      <div class=\"aaa\" ref=\"big\" :style=\"{width: clientWidth + 'px',height: clientHeight + 'px'}\" v-if=\"bigSel == 1\"\r\n        @click=\"close\">\r\n        <img :id=\"'img' + imgIndex\" :src=\"img + '/file/' + imgUrl\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Hammer from 'hammerjs';\r\n  export default {\r\n    data() {\r\n      return {\r\n        img: this.$store.state.baseUrl,\r\n        imgList: [\"fc926a285850476fb136b1c9894c3a4d.jpg\", \"8f67cb75e6e04aa9baec54a403c82efe.jpg\"],\r\n        bigSel: 0,\r\n        imgIndex: 0,\r\n        imgUrl: '',\r\n        tMatrix: [1, 0, 0, 1, 0, 0], //x缩放，无，无，y缩放，x平移，y平移\r\n        initScale: 1, //初始化scale\r\n        el: '', //获取元素\r\n        mc: '',\r\n        ticking: false,\r\n        poscenter: '', //缓存双指的中心坐标\r\n        duration: '', //设置过渡效果，用于双击缩放效果\r\n        lastTranslate: '', //记录上次的偏移值\r\n        lastcenter: '', //图像的中心点，用于对比双指中心点\r\n        center: 0,\r\n        clientHeight: 0,\r\n        clientWidth: 0,\r\n\r\n      }\r\n    },\r\n    methods: {\r\n      close() {\r\n        this.bigSel = 0;\r\n        this.tMatrix = [1, 0, 0, 1, 0, 0];\r\n        this.initScale = 1;\r\n        this.el = '';\r\n        this.mc = '';\r\n        this.ticking = false;\r\n        this.poscenter = '';\r\n        this.duration = '';\r\n        this.lastTranslate = '';\r\n        this.lastcenter = '';\r\n        this.center = 0;\r\n\r\n      },\r\n      clickImg(index, url) {\r\n        this.imgIndex = index;\r\n        this.imgUrl = url;\r\n        this.bigSel = 1;\r\n\r\n        this.$nextTick(() => {\r\n          this.clientWidth = document.documentElement.clientWidth;\r\n          this.clientHeight = document.documentElement.clientHeight;\r\n          this.el = document.getElementById(\"img\" + this.imgIndex);\r\n          this.mc = new Hammer.Manager(this.el);\r\n          this.ticking = false;\r\n          this.poscenter = this.point2D(0, 0); //缓存双指的中心坐标\r\n          this.duration = ''; //设置过渡效果，用于双击缩放效果\r\n          this.lastTranslate = this.point2D(0, 0); //记录上次的偏移值\r\n          this.lastcenter = this.point2D(this.el.offsetWidth / 2, this.el.offsetHeight / 2); //图像的中心点，用于对比双指中心点\r\n          this.center = this.lastcenter;\r\n\r\n          this.mc.add(new Hammer.Pan({\r\n            threshold: 0,\r\n            pointers: 1\r\n          }))\r\n          this.mc.add(new Hammer.Pinch({\r\n            threshold: 0\r\n          }))\r\n          this.mc.add(new Hammer.Tap({\r\n            event: 'doubletap',\r\n            taps: 2\r\n          }));\r\n          this.mc.on(\"panmove\", this.onPan);\r\n          this.mc.on(\"panstart\", this.onPanStart)\r\n          this.mc.on(\"pinchmove\", this.onPinch);\r\n          this.mc.on(\"pinchstart\", this.onPinchStart);\r\n          this.mc.on(\"doubletap\", this.onDoubleTap);\r\n\r\n          /**\r\n          初始化设置\r\n          */\r\n          this.requestElementUpdate();\r\n        })\r\n\r\n      },\r\n\r\n      point2D(x, y) {\r\n        return {\r\n          x: x,\r\n          y: y\r\n        };\r\n      },\r\n\r\n      reqAnimationFrame() {\r\n        return window[Hammer.prefixed(window, 'requestAnimationFrame')] || function (callback) {\r\n          window.setTimeout(callback, 1000 / 60);\r\n        };\r\n      },\r\n\r\n      onPanStart(ev) {\r\n        console.log(ev);\r\n        // ev.stopPropagation();\r\n        // ev.cancelBubble = true;\r\n\r\n        console.log(ev);\r\n        this.lastTranslate = this.point2D(this.tMatrix[4], this.tMatrix[5]) //缓存上一次的偏移值\r\n      },\r\n\r\n      onPan(ev) {\r\n        console.log(ev);\r\n        // ev.stopPropagation();\r\n        // ev.cancelBubble = true;\r\n\r\n        this.duration = '';\r\n        this.el.className = '';\r\n        this.tMatrix[4] = this.lastTranslate.x + ev.deltaX;\r\n        this.tMatrix[5] = this.lastTranslate.y + ev.deltaY;\r\n        this.requestElementUpdate('onpan');\r\n      },\r\n\r\n      onPinchStart(ev) {\r\n        console.log(ev);\r\n        ev.stopPropagation();\r\n        ev.cancelBubble = true;\r\n\r\n        this.duration = '';\r\n        this.lastTranslate = this.point2D(this.tMatrix[4], this.tMatrix[5]) //记录上一次的偏移值\r\n        this.initScale = this.tMatrix[0] || 1;\r\n        this.poscenter = this.point2D(ev.center.x, ev.center.y)\r\n\r\n        this.lastcenter = this.point2D(this.center.x + this.lastTranslate.x, this.center.y + this.lastTranslate\r\n          .y) //重新计算放大后的中心坐标\r\n        this.poscenter = this.point2D(ev.center.x - this.lastcenter.x, ev.center.y - this.lastcenter.y)\r\n        console.log(\"center\", this.lastcenter.x, this.lastcenter.y)\r\n\r\n        this.requestElementUpdate('onpinchStart');\r\n      },\r\n\r\n      onPinch(ev) {\r\n        console.log(ev);\r\n        ev.stopPropagation();\r\n        ev.cancelBubble = true;\r\n\r\n        // var nowScale = this.tMatrix[0] = this.tMatrix[3] = this.initScale * ev.scale;\r\n        // var composscal = (1 - ev.scale);\r\n\r\n        //tMatrix[4] = poscenter.x - ((poscenter.x - lastcenter.x) *  ev.scale + lastcenter.x)  + lastTranslate.x//最后加上上一次的偏移值\r\n        //tMatrix[5] = poscenter.y - ((poscenter.y - lastcenter.y) *  ev.scale + lastcenter.y)  + lastTranslate.y\r\n        this.tMatrix[4] = (1 - ev.scale) * this.poscenter.x + this.lastTranslate.x\r\n        this.tMatrix[5] = (1 - ev.scale) * this.poscenter.y + this.lastTranslate.y\r\n        this.requestElementUpdate('onpinch');\r\n      },\r\n\r\n      onDoubleTap(ev) {\r\n        ev.stopPropagation();\r\n        ev.cancelBubble = true;\r\n\r\n        this.duration = \".3s ease all\";\r\n        var nowScale = this.tMatrix[0];\r\n        if (nowScale != 1 || this.tMatrix[4] != 0) {\r\n          //scale不等于1，要重回1\r\n          this.tMatrix[0] = this.tMatrix[3] = 1;\r\n          this.tMatrix[4] = this.tMatrix[5] = 0;\r\n        } else {\r\n          var pointer = ev.center;\r\n          var scale = 2;\r\n          this.tMatrix[0] = this.tMatrix[3] = scale;\r\n          //var last = point2D\r\n          //tMatrix[4] = pointer.x - ((pointer.x-lastcenter.x) * scale + lastcenter.x);\r\n          //tMatrix[5] = pointer.y - ((pointer.y-lastcenter.y) * scale + lastcenter.y);\r\n          this.tMatrix[4] = (1 - scale) * (pointer.x - this.center.x)\r\n          this.tMatrix[5] = (1 - scale) * (pointer.y - this.center.y)\r\n        }\r\n        this.requestElementUpdate('doubleTap');\r\n      },\r\n\r\n      updateElementTransform() {\r\n        this.el.style.transition = this.duration;\r\n        var tmp = this.tMatrix.join(',');\r\n        console.log(tmp)\r\n        this.el.style.transform = 'matrix(' + tmp + ')';\r\n        this.ticking = false;\r\n      },\r\n\r\n      requestElementUpdate() {\r\n        arguments && console.log(arguments[0])\r\n\r\n        if (!this.ticking) {\r\n          this.reqAnimationFrame(this.updateElementTransform());\r\n          this.ticking = true;\r\n        }\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  // .test-container {\r\n  //   width: 90%;\r\n  //   margin: 0 auto;\r\n  //   padding-top: 20px;\r\n  // }\r\n\r\n  // #scale {\r\n  //   position: relative;\r\n  // }\r\n\r\n  // .aaa {\r\n  //   width: 100%;\r\n  //   height: 100%;\r\n  //   position: absolute;\r\n  //   background: rgba(0, 0, 0, 0.85);\r\n  //   overflow: hidden;\r\n  //   top: 0;\r\n  //   bottom: 0;\r\n  //   left: 0;\r\n  //   right: 0;\r\n  //   z-index: 999;\r\n  // }\r\n\r\n  // .aaa img {\r\n  //   top: 50%;\r\n  //   left: 50%;\r\n  //   width: 200px;\r\n  //   transition: 0s ease all;\r\n  //   position: absolute;\r\n  //   // top: 0;\r\n  // }\r\n</style>\r\n<style lang=\"scss\">\r\n  // .el-carousel {\r\n  //   width: 100%;\r\n  // }\r\n\r\n  // @media screen and (max-width: 767px) {\r\n  //   .el-carousel__arrow {\r\n  //     width: 50px;\r\n  //     height: 50px;\r\n  //     font-size: 15px;\r\n  //   }\r\n  // }\r\n\r\n  // .el-carousel__indicator.is-active button {\r\n  //   background-color: #3d81fd;\r\n  // }\r\n\r\n  // .el-carousel__item.is-active {\r\n  //   z-index: 0;\r\n  // }\r\n</style>"]}]}