{"remainingRequest":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Img-con.vue?vue&type=style&index=0&id=744f61a4&lang=scss&scoped=true&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Img-con.vue","mtime":1615975525856},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmltZy1jb24gewogIHdpZHRoOiA5MCU7CiAgbWFyZ2luOiAwIGF1dG87CiAgcGFkZGluZy10b3A6IDIwcHg7CgogIC5idXR0b24td29yZCB7CiAgICB3aWR0aDogNzAlOwogICAgbWFyZ2luOiAwIGF1dG87CiAgICBtYXJnaW4tdG9wOiA0MHB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKCiAgICAuY2hlY2t3b3JkIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzNkODFmZDsKICAgICAgY29sb3I6ICNmZmY7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgYm9yZGVyOiBub25lOwogICAgICBvdXRsaW5lOiBub25lOwogICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICB9CiAgfQoKICAuZ29iYWNrIHsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgY3Vyc29yOiBwb2ludGVyOwogIH0KfQoKQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMzYxcHgpIHsKICAuY2hlY2t3b3JkIHsKICAgIHdpZHRoOiAxMDBweDsKICAgIGhlaWdodDogNDBweDsKICAgIGxpbmUtaGVpZ2h0OiA0MHB4OwogICAgZm9udC1zaXplOiAxNHB4OwogIH0KCiAgLmdvYmFjayB7CiAgICB3aWR0aDogNjBweDsKCiAgICAuaW1nIHsKICAgICAgaGVpZ2h0OiAyMXB4OwogICAgfQoKICAgIC5wLWZvbnQgewogICAgICBtYXJnaW46IDA7CiAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgIH0KICB9Cn0KCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDM2MHB4KSB7CiAgLmNoZWNrd29yZCB7CiAgICB3aWR0aDogMjUwcHg7CiAgICBoZWlnaHQ6IDEwMHB4OwogICAgLy8gbGluZS1oZWlnaHQ6IDEwMHB4OwogICAgZm9udC1zaXplOiAzN3B4OwogIH0KCiAgLmdvYmFjayB7CiAgICB3aWR0aDogMTQwcHg7CgogICAgLmltZyB7CiAgICAgIGhlaWdodDogNTBweDsKICAgIH0KCiAgICAucC1mb250IHsKICAgICAgbWFyZ2luOiAwOwogICAgICBwYWRkaW5nLXRvcDogN3B4OwogICAgICBmb250LXNpemU6IDQwcHg7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Img-con.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Img-con.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"img-con\">\r\n    <!-- 图片展示 -->\r\n    <div v-if=\"pageSel == 0\" class=\"button-word\">\r\n      <button class=\"checkword\" @click=\"checkWord\">文件预览</button>\r\n      <button class=\"checkword\" @click=\"downWord\">文件下载</button>\r\n    </div>\r\n    <div v-if=\"pageSel == 1\">\r\n      <!-- <el-carousel height=\"600px\" indicator-position=\"outside\" arrow=\"always\" :autoplay=\"false\" ref=\"carousel\">\r\n        <el-carousel-item v-for=\"(imgs, index) in imgListBig\" :key=\"index\">\r\n          <div style=\"width: 100%;height: 550px;margin: 0 auto;\">\r\n            <img style=\"width: auto;height: 100%;object-fit:cover;\" v-show=\"imgs !== '' && imgs !== null\"\r\n              :src=\"img + '/file/' + imgs\" preview=\"1\" />\r\n            <img style=\"width: auto;height: 100%;object-fit:cover;\" v-show=\"imgs !== '' && imgs !== null\"\r\n              :src=\"imgs.msrc\" class=\"preview-img\" @click=\"show(index)\" />\r\n          </div>\r\n        </el-carousel-item>\r\n      </el-carousel> -->\r\n      <vue-preview :slides=\"imgListBig\" class=\"imgPrev\"></vue-preview>\r\n    </div>\r\n    <div v-if=\"pageSel == 2\">\r\n      <div class=\"goback\" @click=\"backToButton\">\r\n        <img src=\"../assets/imgs/home/goback.png\" class=\"img\" />\r\n        <p class=\"p-font\">返回</p>\r\n      </div>\r\n      <div v-for=\"i in numPages\" :key=\"i\">\r\n        <pdf :src=\"pdfSrc\" :page=\"i\"></pdf>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import pdf from 'vue-pdf'\r\n  export default {\r\n    data() {\r\n      return {\r\n        img: this.$store.state.baseUrl,\r\n        imgType: ['jpeg', 'png', 'jpg', 'tif', 'bmp', 'gif'],\r\n        imgList: [],\r\n        imgListBig: [],\r\n        pageSel: 0,\r\n        wordUrl: '',\r\n        wordPdfUrl: '',\r\n        wordEurl: '',\r\n\r\n        currentPage: 0, // pdf文件页码\r\n        pageCount: 0, // pdf文件总页数\r\n        fileType: 'pdf', // 文件类型\r\n        pdfSrc: '', // pdf文件地址\r\n        numPages: 0,\r\n\r\n      }\r\n    },\r\n    components: {\r\n      pdf\r\n    },\r\n    mounted() {\r\n      console.log(this.$route.params.id);\r\n      let id = 0;\r\n      if (this.$route.params.id.indexOf('&') !== -1) {\r\n        console.log(this.$route.params.id);\r\n        id = this.$route.params.id.split('&')[0];\r\n        window.location.href = window.location.href.split('&')[0];\r\n      } else {\r\n        id = this.$route.params.id;\r\n      }\r\n      this.$axios.post(this.$store.state.baseUrl + '/pdfUrlGet', {\r\n        id: id\r\n      }).then(res => {\r\n        console.log('文档详情');\r\n        console.log(res);\r\n        document.title = res.data.name;\r\n        if (res.data.pdfUrl == '') {\r\n          this.pageSel = 1;\r\n          if (res.data.url !== null && res.data.url !== \"\") {\r\n            if (res.data.url.indexOf(\"|\") !== -1) {\r\n              this.imgList = res.data.url.split(\"|\");\r\n            } else {\r\n              this.imgList.push(res.data.url);\r\n            }\r\n          } else {\r\n            this.imgList = [];\r\n          };\r\n          this.imgListBig = [];\r\n\r\n          // this.$nextTick(() => {\r\n          this.bigData();\r\n          // this.slideBanner();\r\n          // })\r\n        } else {\r\n          this.pageSel = 0;\r\n          this.wordUrl = res.data.url;\r\n          this.wordPdfUrl = res.data.pdfUrl;\r\n        };\r\n      });\r\n    },\r\n    methods: {\r\n      show(index) {\r\n        this.$preview.open(index, this.imgListBig);\r\n      },\r\n      bigData() {\r\n        console.log(this.imgList);\r\n        let innerWidth = document.documentElement.clientWidth;\r\n        console.log(innerWidth);\r\n        for (let i = 0; i < this.imgList.length; i++) {\r\n          // 获取图片实际大小\r\n          let newImage = new Object();\r\n          let img2 = new Image();\r\n          img2.src = this.img + '/file/' + this.imgList[i];\r\n          console.log(img2);\r\n          // img2.onload = () => {\r\n          newImage.src = this.img + '/file/' + this.imgList[i]; //大图\r\n          newImage.msrc = this.img + '/file/' + this.imgList[i]; //小图\r\n          newImage.w = img2.width == 0 ? innerWidth : img2.width;\r\n          newImage.h = img2.height == 0 ? 'auto' : img2.height;\r\n          // newImage.w = '100%';\r\n          // newImage.h = '100%';\r\n          // };\r\n          console.log(newImage);\r\n          this.imgListBig.push(newImage);\r\n        };\r\n        console.log(this.imgListBig);\r\n        // location.reload();\r\n      },\r\n      // 返回\r\n      backToButton() {\r\n        this.pageSel = 0;\r\n      },\r\n      // 文件预览\r\n      checkWord() {\r\n        this.pageSel = 2;\r\n        console.log(this.wordPdfUrl);\r\n\r\n        let eurl = this.$store.state.baseUrl + '/file/' + this.wordPdfUrl;\r\n\r\n        console.log(eurl);\r\n        // window.open(eurl);\r\n        this.pdfSrc = eurl;\r\n        this.$nextTick(() => {\r\n          this.pdfSrc = pdf.createLoadingTask(this.pdfSrc);\r\n          this.pdfSrc.promise.then(pdf => {\r\n            this.numPages = pdf.numPages;\r\n          }).catch(err => {\r\n            console.log(err);\r\n          })\r\n        })\r\n      },\r\n      // 下载\r\n      downWord() {\r\n        console.log(this.wordUrl);\r\n        let eurl = this.$store.state.baseUrl + '/file/' + this.wordUrl;\r\n        console.log(eurl);\r\n        window.location.href = eurl;\r\n      },\r\n      // 手指左右滑动轮播\r\n      slideBanner() {\r\n        //选中item的盒子\r\n        let box = document.querySelector('.el-carousel__container');\r\n        //手指起点X坐标\r\n        let startPoint = 0;\r\n        //手指滑动重点X坐标\r\n        let stopPoint = 0;\r\n\r\n        //重置坐标\r\n        let resetPoint = () => {\r\n          startPoint = 0;\r\n          stopPoint = 0;\r\n        }\r\n\r\n        //手指按下\r\n        box.addEventListener(\"touchstart\", (e) => {\r\n          //手指按下的时候停止自动轮播\r\n          this.stopAuto();\r\n          //手指点击位置的X坐标\r\n          startPoint = e.changedTouches[0].pageX;\r\n        });\r\n        //手指滑动\r\n        box.addEventListener(\"touchmove\", (e) => {\r\n          //手指滑动后终点位置X的坐标\r\n          stopPoint = e.changedTouches[0].pageX;\r\n        });\r\n        //当手指抬起的时候，判断图片滚动离左右的距离\r\n        box.addEventListener(\"touchend\", (e) => {\r\n          console.log(e);\r\n          console.log(\"1：\" + startPoint);\r\n          console.log(\"2：\" + stopPoint);\r\n          if (stopPoint == 0 || startPoint - stopPoint == 0) {\r\n            resetPoint();\r\n            return;\r\n          }\r\n          if (startPoint - stopPoint > 0) {\r\n            resetPoint();\r\n            console.log(this.$refs.carousel);\r\n            this.$refs.carousel.next();\r\n            return;\r\n          }\r\n          if (startPoint - stopPoint < 0) {\r\n            resetPoint();\r\n            console.log(this.$refs.carousel);\r\n            this.$refs.carousel.prev();\r\n            return;\r\n          }\r\n        });\r\n      },\r\n      stopAuto() {\r\n\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .img-con {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    padding-top: 20px;\r\n\r\n    .button-word {\r\n      width: 70%;\r\n      margin: 0 auto;\r\n      margin-top: 40px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n\r\n      .checkword {\r\n        background-color: #3d81fd;\r\n        color: #fff;\r\n        text-align: center;\r\n        border: none;\r\n        outline: none;\r\n        border-radius: 4px;\r\n      }\r\n    }\r\n\r\n    .goback {\r\n      margin-bottom: 20px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  @media screen and (min-width: 361px) {\r\n    .checkword {\r\n      width: 100px;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      font-size: 14px;\r\n    }\r\n\r\n    .goback {\r\n      width: 60px;\r\n\r\n      .img {\r\n        height: 21px;\r\n      }\r\n\r\n      .p-font {\r\n        margin: 0;\r\n        font-size: 18px;\r\n      }\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 360px) {\r\n    .checkword {\r\n      width: 250px;\r\n      height: 100px;\r\n      // line-height: 100px;\r\n      font-size: 37px;\r\n    }\r\n\r\n    .goback {\r\n      width: 140px;\r\n\r\n      .img {\r\n        height: 50px;\r\n      }\r\n\r\n      .p-font {\r\n        margin: 0;\r\n        padding-top: 7px;\r\n        font-size: 40px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  @media screen and (max-width: 767px) {\r\n    .el-carousel__arrow {\r\n      width: 50px;\r\n      height: 50px;\r\n      font-size: 15px;\r\n    }\r\n  }\r\n\r\n  .el-carousel__indicator.is-active button {\r\n    background-color: #3d81fd;\r\n  }\r\n\r\n  .el-carousel__item.is-active {\r\n    z-index: 0;\r\n  }\r\n\r\n  .imgPrev {\r\n    .my-gallery {\r\n      figure {\r\n        // display: inline-block;\r\n        margin: 8px;\r\n      }\r\n\r\n      img {\r\n        // width: 5rem;\r\n        width: 90%;\r\n        height: auto;\r\n        padding-bottom: 5px;\r\n        padding-top: 5px;\r\n        border-bottom: 2px dashed #ccc;\r\n      }\r\n    }\r\n\r\n    .pswp__container,\r\n    .pswp__zoom-wrap {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n</style>"]}]}