{"remainingRequest":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Login.vue?vue&type=style&index=0&id=5281d73f&lang=scss&scoped=true&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Login.vue","mtime":1615352970517},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250YWluZXItbG9naW4tb25lIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgLyrlrprkuYlib2R555qE5YWD57Sg5Z6C55u05bGF5LitKi8KICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBiYWNrZ3JvdW5kOiB1cmwoJy4uL2Fzc2V0cy9pbWdzL2xvZ2luL2JhY2swMS5wbmcnKSBuby1yZXBlYXQ7CiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7CgoKICAuY29udGFpbmVyLWxvZ2luLW1haW4gewogICAgd2lkdGg6IDEwNjRweDsKICAgIC8vIG1hcmdpbjogMCBhdXRvOwogICAgLy8gcGFkZGluZy10b3A6IDIzM3B4OwogICAgZGlzcGxheTogZmxleDsKCiAgICAubWFpbi1yaWdodCB7CiAgICAgIHdpZHRoOiA1MzJweDsKICAgICAgaGVpZ2h0OiA2MTRweDsKICAgICAgcGFkZGluZzogMCAxMHB4OwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgICAvLyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7CgogICAgfQogIH0KfQoKLmxvZ2luLXRvcCB7CiAgd2lkdGg6IDQ3MHB4OwogIG1hcmdpbjogMCBhdXRvOwogIG1hcmdpbi10b3A6IDYwcHg7CiAgZGlzcGxheTogZmxleDsKCiAgLnRvcC1zcGFuLWxvZ2luIHsKICAgIGZvbnQtc2l6ZTogMzZweDsKICAgIGNvbG9yOiAjMTUxODNhOwogICAgZm9udC1mYW1pbHk6ICfljY7mlofooYzmpbcnOwogIH0KfQoKLmxvZ2luLWZvcm0gewogIHdpZHRoOiAxMDAlOwogIG1hcmdpbi10b3A6IDUwcHg7CgogIC51c2VybmFtZSB7CiAgICB3aWR0aDogMzgwcHg7CiAgICBtYXJnaW46IDAgYXV0bzsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGVkZWRlOwoKICAgIHAgewogICAgICBtYXJnaW46IDA7CiAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICB9CiAgfQoKICAudXNlci1pbnB1dCwKICAucGFzcy1pbnB1dCB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogNTBweDsKICAgIHBhZGRpbmctbGVmdDogMjBweDsKICAgIGJvcmRlcjogMDsKICAgIGJhY2tncm91bmQ6IDA7CiAgICBvdXRsaW5lOiBub25lOwogICAgZm9udC1zaXplOiAxNnB4OwogICAgLy8gY29sb3I6ICNkZWRlZGU7CiAgfQoKICAucGFzc3dvcmQgewogICAgd2lkdGg6IDM4MHB4OwogICAgbWFyZ2luOiAwIGF1dG87CiAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZWRlZGU7CgogICAgcCB7CiAgICAgIG1hcmdpbjogMDsKICAgICAgbWFyZ2luLXRvcDogM3B4OwogICAgfQogIH0KfQoKLmxvZ2luLWJ1dHRvbiB7CiAgd2lkdGg6IDEwMCU7CiAgbWFyZ2luLXRvcDogNjBweDsKCiAgLmxvZ2luQnRuIHsKICAgIHdpZHRoOiAzODBweDsKICAgIGhlaWdodDogNTBweDsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgZm9udC1zaXplOiAxNnB4OwogICAgY29sb3I6ICNmZmY7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2Q4MmZlOwogICAgYm9yZGVyOiAwOwogICAgb3V0bGluZTogbm9uZTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICB9Cn0KCmlucHV0Ojotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyIHsKICBjb2xvcjogI2RlZGVkZTsKfQoKaW5wdXQ6Oi1tb3otcGxhY2Vob2xkZXIgewogIC8qIE1vemlsbGEgRmlyZWZveCAxOSsgKi8KICBjb2xvcjogI2RlZGVkZTsKfQoKaW5wdXQ6LW1vei1wbGFjZWhvbGRlciB7CiAgLyogTW96aWxsYSBGaXJlZm94IDQgdG8gMTggKi8KICBjb2xvcjogI2RlZGVkZTsKfQoKaW5wdXQ6LW1zLWlucHV0LXBsYWNlaG9sZGVyIHsKICAvKiBJbnRlcm5ldCBFeHBsb3JlciAxMC0xMSAqLwogIGNvbG9yOiAjZGVkZWRlOwp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+HA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"container-login-one\">\r\n    <div class=\"container-login-main\">\r\n      <div class=\"main-left\">\r\n        <img src=\"../assets/imgs/login/back02.png\" />\r\n      </div>\r\n      <div class=\"main-right\" @keydown=\"keyLogin()\">\r\n        <div class=\"login-top\">\r\n          <div class=\"top-img\">\r\n            <img src=\"../assets/imgs/login/image2.png\" />\r\n          </div>\r\n          <div>\r\n            <span class=\"top-span-login\">玉磨铁路备件智能管理系统</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"login-form\">\r\n          <div class=\"username\">\r\n            <input class=\"user-input\" type=\"text\" v-model=\"loginForm.user\" placeholder=\"请输入用户名\" autofocus=\"autofocus\"\r\n              prefix-icon=\"el-icon-s-custom\" tabindex=\"1\" auto-complete=\"on\" />\r\n          </div>\r\n          <div class=\"password\">\r\n            <input class=\"pass-input\" type=\"password\" v-model=\"loginForm.psw\" placeholder=\"请输入密码\"\r\n              prefix-icon=\"el-icon-lock\" tabindex=\"2\" auto-complete=\"on\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"login-button\">\r\n          <button @click=\"handleLogin\" class=\"loginBtn\">登录</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        loginForm: {\r\n          user: \"\",\r\n          psw: \"\"\r\n        },\r\n        usernameImg: require('../assets/imgs/user1.png'),\r\n        passwordImg: require('../assets/imgs/psw1.png'),\r\n      }\r\n    },\r\n    beforeRouteEnter: (to, from, next) => {\r\n      // 组件内守卫\r\n      // 已登录状态回到登录状态，即 登出\r\n      next(vm => {\r\n        vm.$store.dispatch('setToken', null)\r\n      })\r\n    },\r\n    mounted() {\r\n      console.log(document.getElementsByClassName('container-login-one'));\r\n      console.log(document.documentElement.clientHeight);\r\n      document.getElementsByClassName('container-login-one')[0].style.height = document.documentElement.clientHeight +\r\n        'px';\r\n    },\r\n    methods: {\r\n      // 登录\r\n      handleLogin() {\r\n        if (this.loginForm.user == \"\" || this.loginForm.psw == \"\") {\r\n          this.$message.warning({\r\n            message: \"用户名或密码不能为空 !\",\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        } else {\r\n          this.$axios.post(this.$store.state.baseUrl + '/userLogin', {\r\n            user: this.loginForm.user,\r\n            psw: this.loginForm.psw\r\n          }).then((res) => {\r\n            console.log('登陆成功啦');\r\n            console.log(res)\r\n            this.$message.success({\r\n              message: '登陆成功',\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            // 将用户昵称、用户角色和token等放入sessionStorage\r\n            sessionStorage.setItem('nick', res.data.user);\r\n            sessionStorage.setItem('userId', res.data.id);\r\n            sessionStorage.setItem('token', res.data.token);\r\n            // 申请权限\r\n            sessionStorage.setItem('isApply', res.data.isApply);\r\n            // 审批权限\r\n            sessionStorage.setItem('isCheck', res.data.isCheck);\r\n            // 系统管理员权限\r\n            sessionStorage.setItem('isAdmin', res.data.isAdmin);\r\n\r\n            // 将用户昵称、用户角色及token等放入vuex\r\n            this.$store.dispatch('setNick', res.data.user);\r\n            this.$store.dispatch('setToken', res.data.token);\r\n\r\n            this.$store.state.isLogin = true;\r\n            console.log(this.$store.state.isLogin);\r\n\r\n            this.$router.push('/home');\r\n            // 页面回到顶部\r\n            (function smoothscroll() {\r\n              var currentScroll =\r\n                document.documentElement.scrollTop || document.body.scrollTop;\r\n              if (currentScroll > 0) {\r\n                window.requestAnimationFrame(smoothscroll);\r\n                window.scrollTo(0, currentScroll - currentScroll / 5);\r\n              }\r\n            })();\r\n          }).catch((err) => {\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            this.$store.dispatch('setToken', null);\r\n            this.loginForm.password = \"\";\r\n          })\r\n        }\r\n      },\r\n      // 回车键登录\r\n      keyLogin() {\r\n        if (event.keyCode == 13) {\r\n          this.handleLogin();\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .container-login-one {\r\n    display: flex;\r\n    align-items: center;\r\n    /*定义body的元素垂直居中*/\r\n    justify-content: center;\r\n    background: url('../assets/imgs/login/back01.png') no-repeat;\r\n    background-size: 100% 100%;\r\n\r\n\r\n    .container-login-main {\r\n      width: 1064px;\r\n      // margin: 0 auto;\r\n      // padding-top: 233px;\r\n      display: flex;\r\n\r\n      .main-right {\r\n        width: 532px;\r\n        height: 614px;\r\n        padding: 0 10px;\r\n        background-color: #fff;\r\n        // background-color: rgba(0, 0, 0, 0.3);\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  .login-top {\r\n    width: 470px;\r\n    margin: 0 auto;\r\n    margin-top: 60px;\r\n    display: flex;\r\n\r\n    .top-span-login {\r\n      font-size: 36px;\r\n      color: #15183a;\r\n      font-family: '华文行楷';\r\n    }\r\n  }\r\n\r\n  .login-form {\r\n    width: 100%;\r\n    margin-top: 50px;\r\n\r\n    .username {\r\n      width: 380px;\r\n      margin: 0 auto;\r\n      display: flex;\r\n      border: 1px solid #dedede;\r\n\r\n      p {\r\n        margin: 0;\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n\r\n    .user-input,\r\n    .pass-input {\r\n      width: 100%;\r\n      height: 50px;\r\n      padding-left: 20px;\r\n      border: 0;\r\n      background: 0;\r\n      outline: none;\r\n      font-size: 16px;\r\n      // color: #dedede;\r\n    }\r\n\r\n    .password {\r\n      width: 380px;\r\n      margin: 0 auto;\r\n      margin-top: 20px;\r\n      display: flex;\r\n      border: 1px solid #dedede;\r\n\r\n      p {\r\n        margin: 0;\r\n        margin-top: 3px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .login-button {\r\n    width: 100%;\r\n    margin-top: 60px;\r\n\r\n    .loginBtn {\r\n      width: 380px;\r\n      height: 50px;\r\n      margin: 0 auto;\r\n      font-size: 16px;\r\n      color: #fff;\r\n      background-color: #3d82fe;\r\n      border: 0;\r\n      outline: none;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  input::-webkit-input-placeholder {\r\n    color: #dedede;\r\n  }\r\n\r\n  input::-moz-placeholder {\r\n    /* Mozilla Firefox 19+ */\r\n    color: #dedede;\r\n  }\r\n\r\n  input:-moz-placeholder {\r\n    /* Mozilla Firefox 4 to 18 */\r\n    color: #dedede;\r\n  }\r\n\r\n  input:-ms-input-placeholder {\r\n    /* Internet Explorer 10-11 */\r\n    color: #dedede;\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  input:-internal-autofill-selected {\r\n    background-color: transparent !important;\r\n    background-image: none !important;\r\n    color: -internal-light-dark-color(black, white) !important;\r\n  }\r\n</style>"]}]}