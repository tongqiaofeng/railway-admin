{"remainingRequest":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\railway-admin\\src\\views\\Login.vue","mtime":1615357151226},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlcjogIiIsCiAgICAgICAgcHN3OiAiIgogICAgICB9LAogICAgICB1c2VybmFtZUltZzogcmVxdWlyZSgnLi4vYXNzZXRzL2ltZ3MvdXNlcjEucG5nJyksCiAgICAgIHBhc3N3b3JkSW1nOiByZXF1aXJlKCcuLi9hc3NldHMvaW1ncy9wc3cxLnBuZycpLAogICAgfQogIH0sCiAgYmVmb3JlUm91dGVFbnRlcjogKHRvLCBmcm9tLCBuZXh0KSA9PiB7CiAgICAvLyDnu4Tku7blhoXlrojljasKICAgIC8vIOW3sueZu+W9leeKtuaAgeWbnuWIsOeZu+W9leeKtuaAge+8jOWNsyDnmbvlh7oKICAgIG5leHQodm0gPT4gewogICAgICB2bS4kc3RvcmUuZGlzcGF0Y2goJ3NldFRva2VuJywgbnVsbCkKICAgIH0pCiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc29sZS5sb2coZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY29udGFpbmVyLWxvZ2luLW9uZScpKTsKICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpOwogICAgY29uc29sZS5sb2coZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpOwogICAgY29uc29sZS5sb2cod2luZG93LmlubmVySGVpZ2h0KTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbnRhaW5lci1sb2dpbi1vbmUnKVswXS5zdHlsZS5oZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCArCiAgICAgICdweCc7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDnmbvlvZUKICAgIGhhbmRsZUxvZ2luKCkgewogICAgICBpZiAodGhpcy5sb2dpbkZvcm0udXNlciA9PSAiIiB8fCB0aGlzLmxvZ2luRm9ybS5wc3cgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoewogICAgICAgICAgbWVzc2FnZTogIueUqOaIt+WQjeaIluWvhueggeS4jeiDveS4uuepuiAhIiwKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLmJhc2VVcmwgKyAnL3VzZXJMb2dpbicsIHsKICAgICAgICAgIHVzZXI6IHRoaXMubG9naW5Gb3JtLnVzZXIsCiAgICAgICAgICBwc3c6IHRoaXMubG9naW5Gb3JtLnBzdwogICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ+eZu+mZhuaIkOWKn+WVpicpOwogICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+eZu+mZhuaIkOWKnycsCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgLy8g5bCG55So5oi35pi156ew44CB55So5oi36KeS6Imy5ZKMdG9rZW7nrYnmlL7lhaVzZXNzaW9uU3RvcmFnZQogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbmljaycsIHJlcy5kYXRhLnVzZXIpOwogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzLmRhdGEuaWQpOwogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICAvLyDnlLPor7fmnYPpmZAKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2lzQXBwbHknLCByZXMuZGF0YS5pc0FwcGx5KTsKICAgICAgICAgIC8vIOWuoeaJueadg+mZkAogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNDaGVjaycsIHJlcy5kYXRhLmlzQ2hlY2spOwogICAgICAgICAgLy8g57O757uf566h55CG5ZGY5p2D6ZmQCiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc0FkbWluJywgcmVzLmRhdGEuaXNBZG1pbik7CgogICAgICAgICAgLy8g5bCG55So5oi35pi156ew44CB55So5oi36KeS6Imy5Y+KdG9rZW7nrYnmlL7lhaV2dWV4CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0TmljaycsIHJlcy5kYXRhLnVzZXIpOwogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFRva2VuJywgcmVzLmRhdGEudG9rZW4pOwoKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmlzTG9naW4gPSB0cnVlOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUuaXNMb2dpbik7CgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob21lJyk7CiAgICAgICAgICAvLyDpobXpnaLlm57liLDpobbpg6gKICAgICAgICAgIChmdW5jdGlvbiBzbW9vdGhzY3JvbGwoKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50U2Nyb2xsID0KICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICBpZiAoY3VycmVudFNjcm9sbCA+IDApIHsKICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNtb290aHNjcm9sbCk7CiAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGwgLSBjdXJyZW50U2Nyb2xsIC8gNSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKCk7CiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5kYXRhLm1lc3NhZ2UsCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFRva2VuJywgbnVsbCk7CiAgICAgICAgICB0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCA9ICIiOwogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICAvLyDlm57ovabplK7nmbvlvZUKICAgIGtleUxvZ2luKCkgewogICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykgewogICAgICAgIHRoaXMuaGFuZGxlTG9naW4oKTsKICAgICAgfQogICAgfQogIH0sCn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"container-login-one\">\r\n    <div class=\"container-login-main\">\r\n      <div class=\"main-left\">\r\n        <img src=\"../assets/imgs/login/back02.png\" />\r\n      </div>\r\n      <div class=\"main-right\" @keydown=\"keyLogin()\">\r\n        <div class=\"login-top\">\r\n          <div class=\"top-img\">\r\n            <img src=\"../assets/imgs/login/image2.png\" />\r\n          </div>\r\n          <div>\r\n            <span class=\"top-span-login\">玉磨铁路备件智能管理系统</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"login-form\">\r\n          <div class=\"username\">\r\n            <input class=\"user-input\" type=\"text\" v-model=\"loginForm.user\" placeholder=\"请输入用户名\" autofocus=\"autofocus\"\r\n              prefix-icon=\"el-icon-s-custom\" tabindex=\"1\" auto-complete=\"on\" />\r\n          </div>\r\n          <div class=\"password\">\r\n            <input class=\"pass-input\" type=\"password\" v-model=\"loginForm.psw\" placeholder=\"请输入密码\"\r\n              prefix-icon=\"el-icon-lock\" tabindex=\"2\" auto-complete=\"on\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"login-button\">\r\n          <button @click=\"handleLogin\" class=\"loginBtn\">登录</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        loginForm: {\r\n          user: \"\",\r\n          psw: \"\"\r\n        },\r\n        usernameImg: require('../assets/imgs/user1.png'),\r\n        passwordImg: require('../assets/imgs/psw1.png'),\r\n      }\r\n    },\r\n    beforeRouteEnter: (to, from, next) => {\r\n      // 组件内守卫\r\n      // 已登录状态回到登录状态，即 登出\r\n      next(vm => {\r\n        vm.$store.dispatch('setToken', null)\r\n      })\r\n    },\r\n    mounted() {\r\n      console.log(document.getElementsByClassName('container-login-one'));\r\n      console.log(document.documentElement.clientHeight);\r\n      console.log(document.body.clientHeight);\r\n      console.log(window.innerHeight);\r\n      document.getElementsByClassName('container-login-one')[0].style.height = document.body.clientHeight +\r\n        'px';\r\n    },\r\n    methods: {\r\n      // 登录\r\n      handleLogin() {\r\n        if (this.loginForm.user == \"\" || this.loginForm.psw == \"\") {\r\n          this.$message.warning({\r\n            message: \"用户名或密码不能为空 !\",\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        } else {\r\n          this.$axios.post(this.$store.state.baseUrl + '/userLogin', {\r\n            user: this.loginForm.user,\r\n            psw: this.loginForm.psw\r\n          }).then((res) => {\r\n            console.log('登陆成功啦');\r\n            console.log(res)\r\n            this.$message.success({\r\n              message: '登陆成功',\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            // 将用户昵称、用户角色和token等放入sessionStorage\r\n            sessionStorage.setItem('nick', res.data.user);\r\n            sessionStorage.setItem('userId', res.data.id);\r\n            sessionStorage.setItem('token', res.data.token);\r\n            // 申请权限\r\n            sessionStorage.setItem('isApply', res.data.isApply);\r\n            // 审批权限\r\n            sessionStorage.setItem('isCheck', res.data.isCheck);\r\n            // 系统管理员权限\r\n            sessionStorage.setItem('isAdmin', res.data.isAdmin);\r\n\r\n            // 将用户昵称、用户角色及token等放入vuex\r\n            this.$store.dispatch('setNick', res.data.user);\r\n            this.$store.dispatch('setToken', res.data.token);\r\n\r\n            this.$store.state.isLogin = true;\r\n            console.log(this.$store.state.isLogin);\r\n\r\n            this.$router.push('/home');\r\n            // 页面回到顶部\r\n            (function smoothscroll() {\r\n              var currentScroll =\r\n                document.documentElement.scrollTop || document.body.scrollTop;\r\n              if (currentScroll > 0) {\r\n                window.requestAnimationFrame(smoothscroll);\r\n                window.scrollTo(0, currentScroll - currentScroll / 5);\r\n              }\r\n            })();\r\n          }).catch((err) => {\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n            this.$store.dispatch('setToken', null);\r\n            this.loginForm.password = \"\";\r\n          })\r\n        }\r\n      },\r\n      // 回车键登录\r\n      keyLogin() {\r\n        if (event.keyCode == 13) {\r\n          this.handleLogin();\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .container-login-one {\r\n    display: flex;\r\n    align-items: center;\r\n    /*定义body的元素垂直居中*/\r\n    justify-content: center;\r\n    background: url('../assets/imgs/login/back01.png') no-repeat;\r\n    background-size: 100% 100%;\r\n\r\n\r\n    .container-login-main {\r\n      width: 1064px;\r\n      // margin: 0 auto;\r\n      // padding-top: 233px;\r\n      display: flex;\r\n\r\n      .main-right {\r\n        width: 532px;\r\n        height: 614px;\r\n        padding: 0 10px;\r\n        background-color: #fff;\r\n        // background-color: rgba(0, 0, 0, 0.3);\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  .login-top {\r\n    width: 470px;\r\n    margin: 0 auto;\r\n    margin-top: 60px;\r\n    display: flex;\r\n\r\n    .top-span-login {\r\n      font-size: 36px;\r\n      color: #15183a;\r\n      font-family: '华文行楷';\r\n    }\r\n  }\r\n\r\n  .login-form {\r\n    width: 100%;\r\n    margin-top: 50px;\r\n\r\n    .username {\r\n      width: 380px;\r\n      margin: 0 auto;\r\n      display: flex;\r\n      border: 1px solid #dedede;\r\n\r\n      p {\r\n        margin: 0;\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n\r\n    .user-input,\r\n    .pass-input {\r\n      width: 100%;\r\n      height: 50px;\r\n      padding-left: 20px;\r\n      border: 0;\r\n      background: 0;\r\n      outline: none;\r\n      font-size: 16px;\r\n      // color: #dedede;\r\n    }\r\n\r\n    .password {\r\n      width: 380px;\r\n      margin: 0 auto;\r\n      margin-top: 20px;\r\n      display: flex;\r\n      border: 1px solid #dedede;\r\n\r\n      p {\r\n        margin: 0;\r\n        margin-top: 3px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .login-button {\r\n    width: 100%;\r\n    margin-top: 60px;\r\n\r\n    .loginBtn {\r\n      width: 380px;\r\n      height: 50px;\r\n      margin: 0 auto;\r\n      font-size: 16px;\r\n      color: #fff;\r\n      background-color: #3d82fe;\r\n      border: 0;\r\n      outline: none;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  input::-webkit-input-placeholder {\r\n    color: #dedede;\r\n  }\r\n\r\n  input::-moz-placeholder {\r\n    /* Mozilla Firefox 19+ */\r\n    color: #dedede;\r\n  }\r\n\r\n  input:-moz-placeholder {\r\n    /* Mozilla Firefox 4 to 18 */\r\n    color: #dedede;\r\n  }\r\n\r\n  input:-ms-input-placeholder {\r\n    /* Internet Explorer 10-11 */\r\n    color: #dedede;\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  input:-internal-autofill-selected {\r\n    background-color: transparent !important;\r\n    background-image: none !important;\r\n    color: -internal-light-dark-color(black, white) !important;\r\n  }\r\n</style>"]}]}