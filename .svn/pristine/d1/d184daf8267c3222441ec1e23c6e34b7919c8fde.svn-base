{"remainingRequest":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\aa-tong\\my-projects\\railway-admin\\src\\components\\Warehouse-management.vue?vue&type=style&index=0&id=68c41756&lang=scss&scoped=true&","dependencies":[{"path":"D:\\aa-tong\\my-projects\\railway-admin\\src\\components\\Warehouse-management.vue","mtime":1615529041019},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\aa-tong\\my-projects\\railway-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi53YXJlaG91c2UtbWFuYWdlbWVudC1jb250YWluZXIgewogIHBhZGRpbmc6IDIwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXItcmFkaXVzOiA2cHg7CiAgdGV4dC1hbGlnbjogbGVmdDsKCiAgLmlucHV0LXN0eWxlIHsKICAgIHdpZHRoOiAzODVweDsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgfQoKICAuZm9udC10aXRsZS1zdHlsZSB7CiAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIGNvbG9yOiAjNmE2YTZhOwogICAgZm9udC1zaXplOiAxOHB4OwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogIH0KCiAgLmZvbnQtZGl2IHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7CiAgICBib3JkZXItYm90dG9tOiBub25lOwoKICAgIC5kaXYtb25lIHsKICAgICAgaGVpZ2h0OiAzNHB4OwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBsaW5lLWhlaWdodDogMzRweDsKICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7CgogICAgICAub25lLWxlZnQgewogICAgICAgIHdpZHRoOiA5NHB4OwogICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNjY2M7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7CiAgICAgIH0KCiAgICAgIC5vbmUtcmlnaHQgewogICAgICAgIHdpZHRoOiAzNzNweDsKICAgICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgICAgIH0KCiAgICAgIC5xcmNvZGVDbGljayB7CiAgICAgICAgd2lkdGg6IDEwMHB4OwogICAgICAgIGhlaWdodDogMzRweDsKICAgICAgICBmbG9hdDogcmlnaHQ7CiAgICAgICAgbGluZS1oZWlnaHQ6IDM0cHg7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzNkODJmZTsKICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgfQogICAgfQoKICAgIC5kaXYtb25lLW5vdGUgewogICAgICBoZWlnaHQ6IDEwMHB4OwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBsaW5lLWhlaWdodDogMTAwcHg7CiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjOwoKICAgICAgLm9uZS1sZWZ0IHsKICAgICAgICB3aWR0aDogOTRweDsKICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjY2NjOwogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOwogICAgICB9CgogICAgICAub25lLXJpZ2h0IHsKICAgICAgICB3aWR0aDogMzczcHg7CiAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4OwogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Warehouse-management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6nBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Warehouse-management.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"warehouse-management-container\">\r\n    <!-- <h1>出库管理</h1> -->\r\n    <div style=\"display: flex;justify-content: space-between;\" id=\"warehouseCheck\">\r\n      <el-form :inline=\"true\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"部门：\">\r\n          <el-cascader class=\"input-style\" ref=\"menuCascaderFilter\" v-model=\"wid\" :options=\"menuList\" :props=\"propsMenu\"\r\n            :show-all-levels=\"false\" clearable @change=\"menuChange\">\r\n          </el-cascader>\r\n        </el-form-item>\r\n        <el-form-item label=\"仓库：\">\r\n          <el-select v-model=\"warehouseIdList\" multiple placeholder=\"可多选\">\r\n            <el-option v-for=\"ware in warehouseSelList\" :key=\"ware.id\" :label=\"ware.name\" :value=\"ware.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <div style=\"display: flex;\">\r\n            <el-input style=\"width: 400px;\" v-model=\"warehouseKeyword\" @change=\"keywordChange\"\r\n              placeholder=\"可输入厂家、系统、设备名称，设备型号，生产批次进行搜索\" clearable>\r\n            </el-input>\r\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"warehouseCheck\">查 询</el-button>\r\n            <el-button type=\"primary\" @click=\"filterList\">设备筛选</el-button>\r\n            <el-dialog title=\"筛选设备\" :visible.sync=\"dialogDeviceCheckVisible\" :close-on-press-escape=\"false\"\r\n              :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"false\">\r\n              <el-form>\r\n                <el-form-item label=\"所属厂家：\">\r\n                  <el-select v-model=\"supplierId\" class=\"input-style\" @change=\"supplierChange\" clearable>\r\n                    <el-option v-for=\"suppler in supplierList\" :key=\"suppler.id\" :label=\"suppler.name\"\r\n                      :value=\"suppler.id\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"所属系统：\">\r\n                  <el-select v-model=\"systemId\" class=\"input-style\" clearable>\r\n                    <el-option v-for=\"system in systemSelList\" :key=\"system.id\" :label=\"system.name\" :value=\"system.id\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"生产批次：\">\r\n                  <el-input v-model=\"benchmark\" class=\"input-style\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"设备名称：\">\r\n                  <el-input v-model=\"deviceName\" class=\"input-style\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"设备型号：\">\r\n                  <el-input v-model=\"deviceModel\" class=\"input-style\" clearable></el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n              <div slot=\"footer\">\r\n                <el-button @click=\"dialogDeviceCheckVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"filterListSure\" v-preventClick>确 定</el-button>\r\n              </div>\r\n            </el-dialog>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <el-button type=\"info\" @click=\"delivery\">出 库</el-button>\r\n      <el-dialog title=\"设备出库\" :visible.sync=\"dialogDeliveryVisible\" :close-on-press-escape=\"false\"\r\n        :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"false\">\r\n        <el-form :model=\"deliveryData\" :rules=\"deliveryRules\" ref=\"deliveryForm\" label-width=\"92px\">\r\n          <el-form-item label=\"出库类型：\" prop=\"type\">\r\n            <el-select v-model=\"deliveryData.type\" class=\"input-style\">\r\n              <el-option v-for=\"item in deliveryType\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"出库时间：\" prop=\"stockOutTime\">\r\n            <el-date-picker class=\"input-style\" v-model=\"deliveryData.stockOutTime\" type=\"date\" placeholder=\"请选择\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item label=\"领货人：\" prop=\"receiver\">\r\n            <el-input class=\"input-style\" v-model=\"deliveryData.receiver\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"备注：\" prop=\"note\">\r\n            <el-input class=\"input-style\" v-model=\"deliveryData.note\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\">\r\n          <el-button @click=\"dialogDeliveryVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"deliverySure('deliveryForm')\" v-preventClick>确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n    <div style=\"margin-top: 20px;\">\r\n      <el-table ref=\"multipleTable\" :data=\"deviceAllList\" :row-key=\"getRowKeys\" tooltip-effect=\"dark\" border\r\n        @selection-change=\"handleSelectionChange\" @row-click=\"warehouseManaLook\">\r\n        <el-table-column type=\"selection\" :reserve-selection=\"true\" width=\"55\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"deviceName\" label=\"设备名称\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"supplierName\" label=\"所属厂家\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"systemName\" label=\"所属系统\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"warehouseName\" label=\"所属仓库\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"deviceModel\" label=\"设备型号\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"benchmark\" label=\"生产批次\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"deviceNumber\" label=\"设备编号\">\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-dialog title=\"设备信息\" :visible.sync=\"dialogInventoryCheckVisible\" :close-on-press-escape=\"false\"\r\n        :close-on-click-modal=\"false\" :modal-append-to-body=\"false\" :append-to-body=\"false\">\r\n        <div id=\"invenSome\">\r\n          <div style=\"display: flex;justify-content: space-between;\">\r\n            <p class=\"font-title-style\">库存信息</p>\r\n            <div style=\"padding-top: 24px;\">\r\n              <img style=\"cursor: pointer;\" title=\"修改设备信息\" src=\"../assets/imgs/home/update.png\" @click=\"updateDevice\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"font-div\">\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\">\r\n                仓库名称\r\n              </div>\r\n              <div class=\"one-right\">\r\n                {{inventoryCheckDetail.warehouseName}}\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\">\r\n                设备名称\r\n              </div>\r\n              <div class=\"one-right\">\r\n                {{inventoryCheckDetail.deviceName}}\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\">\r\n                设备编号\r\n              </div>\r\n              <div style=\"width: 382px;display: flex;justify-content: space-between;\">\r\n                <div class=\"one-right\">\r\n                  {{inventoryCheckDetail.deviceNumber}}\r\n                </div>\r\n                <div class=\"qrcodeClick\" @click=\"getQrcodeInven\" v-preventClick>打印二维码</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\"\r\n                :style=\"{color: isUpdate == 0 ? '#606266' : '#3d82fe',fontWeight: isUpdate == 0 ? 'normal' : 'bold'}\">\r\n                货架号\r\n              </div>\r\n              <div class=\"one-right\">\r\n                <el-input :readonly=\"isUpdate == 0 ? true : false\" v-model=\"inventoryCheckDetail.shelfNumber\" clearable>\r\n                </el-input>\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\">\r\n                在库时长\r\n              </div>\r\n              <div class=\"one-right\">\r\n                {{inventoryCheckDetail.stockInDays + ' 天'}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p class=\"font-title-style\">设备信息</p>\r\n          <div class=\"font-div\">\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\">\r\n                厂家名称\r\n              </div>\r\n              <div class=\"one-right\">\r\n                {{inventoryCheckDetail.supplierName}}\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\">\r\n                系统名称\r\n              </div>\r\n              <div class=\"one-right\">\r\n                {{inventoryCheckDetail.systemName}}\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\">\r\n                设备型号\r\n              </div>\r\n              <div class=\"one-right\">\r\n                {{inventoryCheckDetail.deviceModel}}\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\"\r\n                :style=\"{color: isUpdate == 0 ? '#606266' : '#3d82fe',fontWeight: isUpdate == 0 ? 'normal' : 'bold'}\">\r\n                生产日期\r\n              </div>\r\n              <div class=\"one-right\">\r\n                <el-date-picker :readonly=\"isUpdate == 0 ? true : false\" v-model=\"inventoryCheckDetail.productTime\"\r\n                  type=\"date\" format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" clearable></el-date-picker>\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\"\r\n                :style=\"{color: isUpdate == 0 ? '#606266' : '#3d82fe',fontWeight: isUpdate == 0 ? 'normal' : 'bold'}\">\r\n                有效日期\r\n              </div>\r\n              <div class=\"one-right\">\r\n                <el-date-picker :readonly=\"isUpdate == 0 ? true : false\" v-model=\"inventoryCheckDetail.validTime\"\r\n                  type=\"date\" format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" clearable></el-date-picker>\r\n              </div>\r\n            </div>\r\n            <div class=\"div-one\">\r\n              <div class=\"one-left\"\r\n                :style=\"{color: isUpdate == 0 ? '#606266' : '#3d82fe',fontWeight: isUpdate == 0 ? 'normal' : 'bold'}\">\r\n                生产批次\r\n              </div>\r\n              <div class=\"one-right\">\r\n                <el-input :readonly=\"isUpdate == 0 ? true : false\" v-model=\"inventoryCheckDetail.benchmark\" clearable>\r\n                </el-input>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p class=\"font-title-style\">备注信息</p>\r\n          <div class=\"font-div\">\r\n            <div class=\"div-one-note\" id=\"one-note\">\r\n              <div class=\"one-left\"\r\n                :style=\"{color: isUpdate == 0 ? '#606266' : '#3d82fe',fontWeight: isUpdate == 0 ? 'normal' : 'bold'}\">\r\n                备注\r\n              </div>\r\n              <div class=\"one-right\">\r\n                <el-input type=\"textarea\" v-model=\"inventoryCheckDetail.note\" :readonly=\"isUpdate == 0 ? true : false\">\r\n                </el-input>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p class=\"font-title-style\">\r\n            设备状态：{{inventoryCheckDetail.flag == 0 ? '库存中' : (inventoryCheckDetail.flag == 1 ? '维修中' :  (inventoryCheckDetail.flag == 2 ? '检修中' : '使用中'))}}\r\n          </p>\r\n          <el-timeline>\r\n            <el-timeline-item color=\"#3d82fe\" size=\"large\"\r\n              v-for=\"(activity, index) in inventoryCheckDetail.stockInOutList\" :key=\"index\">\r\n              {{activity.time}}\r\n              <span\r\n                style=\"display: inline-block;margin-left: 10px;\">{{activity.type == 0 ? (activity.flag == 1 ? '新购入库' : (activity.flag == 2 ? '归还入库' : (activity.flag == 3 ? '维修入库' : '检修入库'))) : (activity.flag == 1 ? '使用出库' : (activity.flag == 2 ? '维修出库' : '检修出库'))}}</span>\r\n            </el-timeline-item>\r\n          </el-timeline>\r\n        </div>\r\n        <div slot=\"footer\">\r\n          <el-button @click=\"dialogInventoryCheckVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"inventoryLookSure\" v-preventClick>确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <div style=\"width: 100%;height: 50px;\">\r\n        <div style=\"margin:15px 0;position:absolute;right:6%;\">\r\n          <el-pagination @current-change=\"handleCurrentChange\" :current-page=\"page\"\r\n            layout=\"total, prev, pager, next, jumper\" :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        dialogDeviceCheckVisible: false,\r\n        warehouseIdList: [],\r\n        supplierId: '',\r\n        systemId: '',\r\n        benchmark: '',\r\n        deviceName: '',\r\n        deviceModel: '',\r\n        supplierList: [],\r\n        systemList: [],\r\n        systemSelList: [],\r\n        multipleSelection: [],\r\n        deviceAllList: [],\r\n        dialogDeliveryVisible: false,\r\n        deliveryType: [{\r\n          id: 1,\r\n          name: '使用出库'\r\n        }, {\r\n          id: 2,\r\n          name: '维修出库'\r\n        }, {\r\n          id: 3,\r\n          name: '检修出库'\r\n        }, {\r\n          id: 4,\r\n          name: '报废出库'\r\n        }, ],\r\n        deliveryData: {\r\n          type: 1,\r\n          stockOutTime: '',\r\n          receiver: '',\r\n          note: '',\r\n          stockInIdList: []\r\n\r\n        },\r\n        deliveryRules: {\r\n          type: [{\r\n            required: true,\r\n            message: '请选择出库类型',\r\n            trigger: 'change'\r\n          }],\r\n          stockOutTime: [{\r\n            required: true,\r\n            message: '请选择出库时间',\r\n            trigger: 'blur'\r\n          }],\r\n          receiver: [{\r\n            required: true,\r\n            message: '请输入领货人',\r\n            trigger: 'blur'\r\n          }],\r\n        },\r\n        warehouseKeyword: '',\r\n        page: 1,\r\n        pageNum: 10,\r\n        total: 0,\r\n\r\n        wid: '',\r\n        menuList: [],\r\n        propsMenu: {\r\n          checkStrictly: true,\r\n          emitPath: false,\r\n          value: 'id',\r\n          label: 'label'\r\n        },\r\n        warehouseSelList: [],\r\n\r\n        dialogInventoryCheckVisible: false,\r\n        inventoryCheckDetail: {},\r\n\r\n        isUpdate: 0,\r\n\r\n      }\r\n    },\r\n    created() {\r\n      this.filterListSure();\r\n      this.getMenuList();\r\n      this.getSupplierAllList();\r\n    },\r\n    methods: {\r\n      // 修改查看设备\r\n      warehouseManaLook(row) {\r\n        console.log(row);\r\n        this.inventoryCheckDetail = {};\r\n        this.inventoryCheckDetail = row;\r\n\r\n        this.isUpdate = 0;\r\n        this.dialogInventoryCheckVisible = true;\r\n      },\r\n      updateDevice() {\r\n        this.isUpdate = 1;\r\n      },\r\n      // 打印二维码\r\n      getQrcodeInven() {\r\n        let param = \"\\\"CMD\\\":\\\"2\\\",\\\"CMDDATA\\\":\\\"TEXT 30,30,\\\"TSS24.BF2\\\",0,1,1,\" + \"\\\"仓库：\" + this.inventoryCheckDetail\r\n          .warehouseName + \"\\\"\" +\r\n          \"`TEXT 30,68,\\\"TSS24.BF2\\\",0,1,1,\\\"厂家：\" + this.inventoryCheckDetail.supplierName + \"\\\"\" +\r\n          \"`TEXT 30,106,\\\"TSS24.BF2\\\",0,1,1,\\\"设备名称：\" + this.inventoryCheckDetail.deviceName + \"\\\"\" +\r\n          \"`TEXT 30,144,\\\"TSS24.BF2\\\",0,1,1,\\\"设备型号：\" + this.inventoryCheckDetail.deviceModel + \"\\\"\" +\r\n          \"`TEXT 30,182,\\\"TSS24.BF2\\\",0,1,1,\\\"入库时间：\" + this.shellDateTwo(this.inventoryCheckDetail.stockInTime) + \"\\\"\" +\r\n          \"`TEXT 30,220,\\\"TSS24.BF2\\\",0,1,1,\\\"到期时间：\" + this.shellDateTwo(this.inventoryCheckDetail.validTime) + \"\\\"\" +\r\n          \"`TEXT 30,258,\\\"TSS24.BF2\\\",0,1,1,\\\"编号：\" + this.inventoryCheckDetail.deviceNumber + \"\\\"\" +\r\n          \"`QRCODE 340,174,L,5,A,0,\" + \"\\\"\" +\r\n          this.inventoryCheckDetail.deviceNumber + \"\\\"\" + \"\\\"CMDEND\";\r\n        this.$axios\r\n          .post(\"http://127.0.0.1:8079\",\r\n            param\r\n          )\r\n          .then(res => {\r\n            console.log(res);\r\n            this.$message.success({\r\n              message: \"条码打印成功\",\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n            this.$message.error({\r\n              message: err.data.message,\r\n              showClose: true,\r\n              duration: 2000\r\n            });\r\n          });\r\n      },\r\n      // 确定\r\n      inventoryLookSure() {\r\n        if (this.isUpdate == 0) {\r\n          this.dialogInventoryCheckVisible = false;\r\n        } else {\r\n          this.$axios.post(this.$store.state.baseUrl + '/stockMsgUpdate', {\r\n              id: this.inventoryCheckDetail.id,\r\n              productTime: this.inventoryCheckDetail.productTime,\r\n              validTime: this.inventoryCheckDetail.validTime,\r\n              benchmark: this.inventoryCheckDetail.benchmark,\r\n              shelfNumber: this.inventoryCheckDetail.shelfNumber,\r\n              note: this.inventoryCheckDetail.note\r\n            }).then(res => {\r\n              console.log('修改设备信息');\r\n              console.log(res);\r\n              this.$message.success({\r\n                message: \"修改成功\",\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n              this.dialogInventoryCheckVisible = false;\r\n              this.warehouseCheck();\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n              this.$message.error({\r\n                message: err.data.message,\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n            });\r\n        }\r\n      },\r\n      getRowKeys(row) {\r\n        return row.id\r\n      },\r\n      // 选择出库设备\r\n      handleSelectionChange(val) {\r\n        this.multipleSelection = val;\r\n        console.log(this.multipleSelection);\r\n      },\r\n      // 出库\r\n      delivery() {\r\n        this.deliveryData.stockInIdList = [];\r\n        this.deliveryData.type = 1;\r\n        this.deliveryData.stockOutTime = '';\r\n        this.deliveryData.receiver = '';\r\n        this.deliveryData.note = '';\r\n        if (this.multipleSelection.length == 0) {\r\n          this.$message.error({\r\n            message: '请选择出库设备',\r\n            showClose: true,\r\n            duration: 1000\r\n          })\r\n        } else {\r\n          for (const device of this.multipleSelection) {\r\n            this.deliveryData.stockInIdList.push(device.id);\r\n          };\r\n          console.log(this.deliveryData.stockInIdList);\r\n          this.dialogDeliveryVisible = true;\r\n        };\r\n      },\r\n      // 确定出库\r\n      deliverySure(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$axios.post(this.$store.state.baseUrl + '/stockOutDo', {\r\n              type: this.deliveryData.type,\r\n              stockOutTime: this.shellDate(this.deliveryData.stockOutTime),\r\n              note: this.deliveryData.note,\r\n              receiver: this.deliveryData.receiver,\r\n              stockInIdList: this.deliveryData.stockInIdList\r\n            }).then(res => {\r\n              console.log('设备出库');\r\n              console.log(res);\r\n              this.$message.success({\r\n                message: '出库成功',\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n              this.dialogDeliveryVisible = false;\r\n              this.deliveryData.stockInIdList = [];\r\n              this.multipleSelection.length = 0;\r\n              this.$refs.multipleTable.clearSelection();\r\n              console.log(this.multipleSelection);\r\n              console.log(this.deliveryData.stockInIdList);\r\n              this.filterListSure();\r\n            }).catch(err => {\r\n              console.log(err);\r\n              this.$message.error({\r\n                message: err.data.message,\r\n                showClose: true,\r\n                duration: 2000\r\n              });\r\n              this.dialogDeliveryVisible = false;\r\n            })\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      // 筛选设备\r\n      filterList() {\r\n        this.dialogDeviceCheckVisible = true;\r\n        // this.supplierId = '';\r\n        // this.systemId = '';\r\n        // this.benchmark = '';\r\n        // this.deviceName = '';\r\n        // this.deviceModel = '';\r\n        // this.page = 1;\r\n      },\r\n      // 厂家选择\r\n      supplierChange() {\r\n        this.systemSelList = [];\r\n        for (const item of this.systemList) {\r\n          if (item.parentId == this.supplierId) {\r\n            this.systemSelList.push(item);\r\n          }\r\n        }\r\n      },\r\n      // 确定筛选\r\n      filterListSure() {\r\n        this.deviceAllList = [];\r\n        this.$axios.post(this.$store.state.baseUrl + '/stockOutInList', {\r\n          wid: this.wid,\r\n          warehouseIdList: this.warehouseIdList.indexOf(0) !== -1 ? [] : this.warehouseIdList,\r\n          keyword: this.warehouseKeyword,\r\n          supplierId: this.supplierId,\r\n          systemId: this.systemId,\r\n          benchmark: this.benchmark,\r\n          deviceName: this.deviceName,\r\n          deviceModel: this.deviceModel,\r\n          page: this.page,\r\n          pageNum: this.pageNum\r\n        }).then((res) => {\r\n          console.log('条件查找库存列表');\r\n          console.log(res);\r\n          this.total = res.data.total;\r\n          this.deviceAllList = res.data.list;\r\n          console.log(this.deviceAllList);\r\n          this.dialogDeviceCheckVisible = false;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n          this.dialogDeviceCheckVisible = false;\r\n        });\r\n      },\r\n      // 模糊搜索\r\n      keywordChange() {\r\n        this.supplierId = '';\r\n        this.systemId = '';\r\n        this.benchmark = '';\r\n        this.deviceName = '';\r\n        this.deviceModel = '';\r\n        this.page = 1;\r\n      },\r\n      warehouseCheck() {\r\n        this.deviceAllList = [];\r\n        this.$axios.post(this.$store.state.baseUrl + '/stockOutInList', {\r\n          wid: this.wid,\r\n          warehouseIdList: this.warehouseIdList.indexOf(0) !== -1 ? [] : this.warehouseIdList,\r\n          keyword: this.warehouseKeyword,\r\n          page: this.page,\r\n          pageNum: this.pageNum\r\n        }).then((res) => {\r\n          console.log('条件查找库存列表');\r\n          console.log(res);\r\n          this.total = res.data.total;\r\n          this.deviceAllList = res.data.list;\r\n          console.log(this.deviceAllList);\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.$message.error({\r\n            message: err.data.message,\r\n            showClose: true,\r\n            duration: 2000\r\n          })\r\n        });\r\n      },\r\n      // 分页\r\n      handleCurrentChange(val) {\r\n        console.log(`当前页: ${val}`);\r\n        this.page = val;\r\n        (function smoothscroll() {\r\n          let currentScroll =\r\n            document.documentElement.scrollTop || document.body.scrollTop;\r\n          if (currentScroll > 0) {\r\n            window.requestAnimationFrame(smoothscroll);\r\n            window.scrollTo(0, currentScroll - currentScroll / 5);\r\n          }\r\n        })();\r\n        if (this.warehouseKeyword == '') {\r\n          this.filterListSure();\r\n        } else {\r\n          this.warehouseCheck();\r\n        }\r\n      },\r\n      // 部门下的仓库\r\n      menuChange(value) {\r\n        console.log(value);\r\n        this.$refs.menuCascaderFilter.dropDownVisible = false;\r\n        this.warehouseSelList = [{\r\n          id: 0,\r\n          name: '全部'\r\n        }];\r\n\r\n        this.$axios.post(this.$store.state.baseUrl + '/deptWarehouseList', {\r\n          wid: value\r\n        }).then(res => {\r\n          console.log('部门下所有仓库');\r\n          console.log(res);\r\n          this.warehouseSelList = this.warehouseSelList.concat(res.data);\r\n          console.log(this.warehouseSelList);\r\n        }).catch(err => {\r\n          console.log(err);\r\n        })\r\n      },\r\n      // 获取部门列表\r\n      getMenuList() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/userDeptList').then((res) => {\r\n          console.log('部门列表');\r\n          console.log(res);\r\n          this.menuList = res.data;\r\n          this.wid = this.menuList[0].id;\r\n          this.menuChange(this.menuList[0].id);\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        });\r\n      },\r\n      // 获取所有厂家列表\r\n      getSupplierAllList() {\r\n        this.$axios.post(this.$store.state.baseUrl + '/supplierList').then((res) => {\r\n          console.log('厂家列表');\r\n          console.log(res);\r\n          this.supplierList = res.data.supplierList;\r\n          this.systemList = res.data.systemList;\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        });\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .warehouse-management-container {\r\n    padding: 20px;\r\n    background-color: #fff;\r\n    border-radius: 6px;\r\n    text-align: left;\r\n\r\n    .input-style {\r\n      width: 385px;\r\n      margin-bottom: 20px;\r\n    }\r\n\r\n    .font-title-style {\r\n      margin-top: 20px;\r\n      margin-bottom: 10px;\r\n      color: #6a6a6a;\r\n      font-size: 18px;\r\n      font-weight: bold;\r\n      text-align: left;\r\n    }\r\n\r\n    .font-div {\r\n      border: 1px solid #ccc;\r\n      border-bottom: none;\r\n\r\n      .div-one {\r\n        height: 34px;\r\n        display: flex;\r\n        line-height: 34px;\r\n        border-bottom: 1px solid #ccc;\r\n\r\n        .one-left {\r\n          width: 94px;\r\n          border-right: 1px solid #ccc;\r\n          text-align: center;\r\n          background-color: #f2f2f2;\r\n        }\r\n\r\n        .one-right {\r\n          width: 373px;\r\n          padding-left: 10px;\r\n        }\r\n\r\n        .qrcodeClick {\r\n          width: 100px;\r\n          height: 34px;\r\n          float: right;\r\n          line-height: 34px;\r\n          background-color: #3d82fe;\r\n          color: #fff;\r\n          font-size: 13px;\r\n          text-align: center;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n\r\n      .div-one-note {\r\n        height: 100px;\r\n        display: flex;\r\n        line-height: 100px;\r\n        border-bottom: 1px solid #ccc;\r\n\r\n        .one-left {\r\n          width: 94px;\r\n          border-right: 1px solid #ccc;\r\n          text-align: center;\r\n          background-color: #f2f2f2;\r\n        }\r\n\r\n        .one-right {\r\n          width: 373px;\r\n          padding-left: 10px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  #warehouseCheck {\r\n    .el-button--info {\r\n      height: 40px;\r\n      color: #000;\r\n      background-color: #d1d8de;\r\n      border-color: #d1d8de;\r\n    }\r\n  }\r\n\r\n  #invenSome {\r\n    .el-input__inner {\r\n      width: 100%;\r\n      height: 34px !important;\r\n      padding-left: 0;\r\n      line-height: 34px !important;\r\n      border: none;\r\n      border-radius: 0;\r\n    }\r\n\r\n    .el-input__icon {\r\n      height: 100%;\r\n      width: 25px;\r\n      text-align: center;\r\n      transition: all .3s;\r\n      line-height: 34px;\r\n    }\r\n\r\n    .el-input--prefix .el-input__inner {\r\n      padding-left: 30px;\r\n    }\r\n\r\n    .el-input__prefix {\r\n      left: 0;\r\n      transition: all .3s;\r\n    }\r\n\r\n    .el-date-editor.el-input,\r\n    .el-date-editor.el-input__inner {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  #one-note {\r\n    .el-input__inner {\r\n      width: 100%;\r\n      height: 100px !important;\r\n      // padding-left: 0;\r\n      line-height: 100px !important;\r\n      border: none;\r\n      border-radius: 0;\r\n    }\r\n\r\n    .el-textarea__inner {\r\n      height: 100px;\r\n      display: block;\r\n      resize: vertical;\r\n      padding: 5px 15px;\r\n      padding-left: 0;\r\n      line-height: 1.5;\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n      font-size: inherit;\r\n      color: #606266;\r\n      background-color: #FFF;\r\n      background-image: none;\r\n      border: none;\r\n      border-radius: 0;\r\n      transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\r\n    }\r\n  }\r\n</style>"]}]}